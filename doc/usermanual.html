<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.6" />
<title>tanasinn terminal emulator</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

pre {
  padding: 0;
  margin: 0;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #777777;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }


/*
 * xhtml11 specific
 *
 * */

tt {
  font-family: monospace;
  font-size: inherit;
  color: navy;
}

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

.monospaced {
  font-family: monospace;
  font-size: inherit;
  color: navy;
}

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


/*
 * Theme specific overrides of the preceding (asciidoc.css) CSS.
 *
 */
body {
  font-family: Garamond, Georgia, serif;
  font-size: 17px;
  color: #3E4349;
  line-height: 1.3em;
}
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Garmond, Georgia, serif;
  font-weight: normal;
  border-bottom-width: 0;
  color: #3E4349;
}
div.title, caption.title { color: #596673; font-weight: bold; }
h1 { font-size: 240%; }
h2 { font-size: 180%; }
h3 { font-size: 150%; }
h4 { font-size: 130%; }
h5 { font-size: 115%; }
h6 { font-size: 100%; }
#header h1 { margin-top: 0; }
#toc {
  color: #444444;
  line-height: 1.5;
  padding-top: 1.5em;
}
#toctitle {
  font-size: 20px;
}
#toc a {
    border-bottom: 1px dotted #999999;
    color: #444444 !important;
    text-decoration: none !important;
}
#toc a:hover {
    border-bottom: 1px solid #6D4100;
    color: #6D4100 !important;
    text-decoration: none !important;
}
div.toclevel1 { margin-top: 0.2em; font-size: 16px; }
div.toclevel2 { margin-top: 0.15em; font-size: 14px; }
em, dt, td.hdlist1 { color: black; }
strong { color: #3E4349; }
a { color: #004B6B; text-decoration: none; border-bottom: 1px dotted #004B6B; }
a:visited { color: #615FA0; border-bottom: 1px dotted #615FA0; }
a:hover { color: #6D4100; border-bottom: 1px solid #6D4100; }
div.tableblock > table, table.tableblock { border: 3px solid #E8E8E8; }
th.tableblock, td.tableblock { border: 1px solid #E8E8E8; }
ul > li > * { color: #3E4349; }
pre, tt, .monospaced { font-family: Consolas,Menlo,'Deja Vu Sans Mono','Bitstream Vera Sans Mono',monospace; }
tt, .monospaced { font-size: 0.9em; color: black;
}
div.exampleblock > div.content, div.sidebarblock > div.content, div.listingblock > div.content { border-width: 0 0 0 3px; border-color: #E8E8E8; }
div.verseblock { border-left-width: 0; margin-left: 3em; }
div.quoteblock { border-left-width: 3px; margin-left: 0; margin-right: 0;}
div.admonitionblock td.content { border-left: 3px solid #E8E8E8; }
@media screen {
  body {
    max-width: 50em; /* approximately 80 characters wide */
    margin-left: 16em;
  }

  #toc {
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    width: 13em;
    padding: 0.5em;
    padding-bottom: 1.5em;
    margin: 0;
    overflow: auto;
    border-right: 3px solid #f8f8f8;
    background-color: white;
  }

  #toc .toclevel1 {
    margin-top: 0.5em;
  }

  #toc .toclevel2 {
    margin-top: 0.25em;
    display: list-item;
    color: #aaaaaa;
  }

  #toctitle {
    margin-top: 0.5em;
  }
}
</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([2-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install(2);
/*]]>*/
</script>
</head>
<body class="article">
<div id="header">
<h1>tanasinn terminal emulator</h1>
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph"><p><a href="./usermanual-ja.html">日本語/Japanese</a></p></div>
</div>
</div>
<div class="sect1">
<h2 id="_overview">Overview</h2>
<div class="sectionbody">
<div class="literalblock">
<div class="content">
<pre><tt>Here is a terminal emulator that runs on Firefox/Thunderbird/SeaMonkey.
It enables you to access flexible, powerful functionality
provided by operating systems, such as commandline shells, or curses-based
applications.</tt></pre>
</div></div>
</div>
</div>
<div class="sect1">
<h2 id="_news">News</h2>
<div class="sectionbody">
<div class="paragraph"><p>2012/02/04
Now version 0.1.5.3 available.</p></div>
<div class="sect2">
<h3 id="_download_license">Download/License</h3>
<div class="literalblock">
<div class="content">
<pre><tt>This software is distributed under Mozilla Public License 1.1 (MPL1.1) .</tt></pre>
</div></div>
<div class="ulist"><ul>
<li>
<p>
Developing version (0.1.5.3): <a href="http://zuse.jp/tanasinn/downloads/versions/0.1.5.3/tanasinn@zuse.jp.xpi">Download</a>
</p>
</li>
<li>
<p>
Unstable, Snapshot version (it may so bugful!): <a href="http://zuse.jp/tanasinn/tanasinn-current.xpi">Download</a>
</p>
</li>
<li>
<p>
git repo: git://zuse.jp/git/tanasinn.git
</p>
</li>
<li>
<p>
gitweb: <a href="http://zuse.jp/git/?p=tanasinn.git">http://zuse.jp/git/?p=tanasinn.git</a>
</p>
</li>
</ul></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_highlighting_features">Highlighting features</h2>
<div class="sectionbody">
<div class="ulist"><ul>
<li>
<p>
Full Gecko based user interface (HTML Canvas + XUL), it is flexible and easy to customize.
</p>
</li>
<li>
<p>
Multi-platform, now supports Mac / FreeBSD / Linux (Tested in Ubuntu) /
      Windows(XP/Vista/7) + <a href="http://www.cygwin.com">Cygwin</a> (requires posix python).
</p>
</li>
<li>
<p>
Supports plugin architecture. it supports Plug-and-Play installing &amp; uninstalling.
</p>
</li>
<li>
<p>
Retaining TTY session during closing/restarting browser.
      you can reconnect suspended terminal session.
</p>
</li>
<li>
<p>
Including debugger. You can run it in step-execution-mode or trace-mode
      and observe terminal I/O sequence in real-time.
</p>
</li>
<li>
<p>
Supports basic features, scroll-back, alternate screen, visual bell, audio bell &#8230;etc.
</p>
</li>
<li>
<p>
IME is supported.
</p>
</li>
<li>
<p>
Supports east asian double width characters.
      but it is not render bidi languages correctly.
</p>
</li>
<li>
<p>
Localization supported. It is using gettext-style method. you can edit localize resource on UI.
</p>
</li>
<li>
<p>
You can selects variable character encoding supported by Gecko.
</p>
</li>
<li>
<p>
Supports transparent window. it is useful when www-browsing while working at terminal.
</p>
</li>
<li>
<p>
xterm-like mouse emulation. supports smoothing pixel scroll.
</p>
</li>
<li>
<p>
Text selection / Rectangle text selection.
</p>
</li>
<li>
<p>
Supports copy / paste in Drag &amp; Drop or keyboard shortcut.
</p>
</li>
<li>
<p>
Supports move / re-size through dragging operation.
</p>
</li>
<li>
<p>
Supports 256 terminal colors, you can assign 32bit colors for them.
</p>
</li>
<li>
<p>
Vimperator / Keysnail like commandline interface.
</p>
</li>
<li>
<p>
It can be installed as a plugin for Vimperator/Muttator. It hooks "&lt;C-i&gt;" and "gF" mappings if you want.
</p>
</li>
<li>
<p>
Running as standalone XUL application if you want. (but now buggy!)
</p>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="_screen_shots">Screen-shots</h2>
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="images/bb2.png" alt="images/bb2.png" width="780" />
</div>
<div class="title">Figure 1. Running "<a href="http://w3m.sourceforge.net/index.en.html">BB</a>", an ascii art demo program.</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/color2.png" alt="images/color2.png" width="780" />
</div>
<div class="title">Figure 2. Displaying color chart with <a href="http://code.google.com/p/myminios/source/browse/trunk/colortable16.sh?r=10">colortable.sh</a> and <a href="http://code.google.com/p/joeldotfiles/source/browse/trunk/256colors2.pl">256color2.pl</a>.</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/ime2.png" alt="images/ime2.png" width="780" />
</div>
<div class="title">Figure 3. Typing Japanese with IME (here is <a href="http://aquaskk.sourceforge.jp/">AquaSKK</a>).</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/scroll2.png" alt="images/scroll2.png" width="780" />
</div>
<div class="title">Figure 4. Scroll bar interface emerges only when it is needed (like OSX Lion).</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/overlay2.png" alt="images/overlay2.png" width="780" />
</div>
<div class="title">Figure 5. Overlay indicator dislays various messages. it emerges when font size / window size / title bar message is changed.</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/completion2.png" alt="images/completion2.png" width="780" />
</div>
<div class="title">Figure 6. Commandline interface inspired by <a href="http://vimperator.org/vimperator">Vimperator</a> / <a href="https://github.com/mooz/keysnail/wiki/">Keysnail</a> (here is fgcolor command).</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/fontfamily2.png" alt="images/fontfamily2.png" width="780" />
</div>
<div class="title">Figure 7. Choosing font-family.</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/fontsize2.png" alt="images/fontsize2.png" width="780" />
</div>
<div class="title">Figure 8. Selecting font-size.</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/launcher2.png" alt="images/launcher2.png" width="780" />
</div>
<div class="title">Figure 9. Launcher interface inspired by <a href="http://www.blacktree.com/">QuckSilver</a> / <a href="https://addons.mozilla.org/ja/firefox/addon/mozilla-labs-ubiquity/">Ubiquity</a>.</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/session2.png" alt="images/session2.png" width="780" />
</div>
<div class="title">Figure 10. Reconnecting a detached session. It is all OK if your browser will crash or restart unexpectedly.</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/sl2.png" alt="images/sl2.png" width="780" />
</div>
<div class="title">Figure 11. running "<a href="http://www.tkl.iis.u-tokyo.ac.jp/~toyoda/index_e.html">sl</a>" (a joke software).</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/debug2.png" alt="images/debug2.png" width="780" />
</div>
<div class="title">Figure 12. Self-Debugging and tracing terminal I/O sequence in real-time.</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/vim.png" alt="images/vim.png" width="780" />
</div>
<div class="title">Figure 13. Providing cool pop-up menu. it is cooperating with patched <a href="http://www.vim.org">Vim</a>.</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/w3m2.png" alt="images/w3m2.png" width="780" />
</div>
<div class="title">Figure 14. Browser-in-browser. running <a href="http://w3m.sourceforge.net/index.en.html">w3m</a> (applied private patch) with inline images. How crazy!!!</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wl3.png" alt="images/wl3.png" width="780" />
</div>
<div class="title">Figure 15. Mailer-in-mailer. running <a href="http://www.gohome.org/wl/index.html">Wonderlust</a> on emacs on Thunderbird.</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/xulapp.png" alt="images/xulapp.png" width="780" />
</div>
<div class="title">Figure 16. Meta-developing tanasinn with tanasinn at out of jail. it runs as a standalone XUL application.</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_features_in_future_8230">Features in future&#8230;</h2>
<div class="sectionbody">
<div class="ulist"><ul>
<li>
<p>
Improving emulation. now emulation engine is running with xterm compatible mode.
      but it ought to read terminfo entries.
</p>
</li>
<li>
<p>
Supporting color scheme. import/export color palette contains 16 or 256 colors.
</p>
</li>
<li>
<p>
Supporting skins. you can make it otakunized.
</p>
</li>
<li>
<p>
Making it to be more collaborative with curses-based applications.
      Accessing to Gecko and do something like opening pop-up windows, playing movies,
      OAuth authorization, &#8230;etc., from terminal applications.
      We&#8217;re dreaming of enjoying youtube or twitter with no plugins, from terminal, don&#8217;t you?
</p>
</li>
<li>
<p>
Documents for plug-in developers are comming soon&#8230; - -;)
</p>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="_requirements">Requirements</h2>
<div class="sectionbody">
<div class="ulist"><ul>
<li>
<p>
Firefox 4.02pre+ / Thunderbird 7.0a1+ / SeaMonkey 2.1+.
</p>
</li>
<li>
<p>
Python for POSIX (2.5+, Mac, FreeBSD, Linux, or cygwin version)
      Python for Win32, ActivePython, etc&#8230; are not well.
      because this software depends on many posix functions
      <em>os.fork</em>, <em>os.openpty</em> ..etc.
</p>
</li>
<li>
<p>
Posix environment.
      If you are running Windows, you need to install cygwin at C:\cygwin.
</p>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="_installing">Installing</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_building_firefox_thunderbird_seamonkey_extension">Building Firefox/Thunderbird/SeaMonkey extension:</h3>
<div class="listingblock">
<div class="title">Mac, FreeBSD, Linux, Cygwin</div>
<div class="content">
<pre><tt>git clone git://zuse.jp/git/tanasinn.git
cd tanasinn
./configure
make</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>If build process is succeeded, target XPI file
tanasinn@zuse.jp is to be generated. enjoy it!</tt></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_installing_as_vimperator_muttator_plugin">Installing as Vimperator/Muttator plugin:</h3>
<div class="literalblock">
<div class="content">
<pre><tt>Make some links into Vimperator/Muttator runtime directory as following:</tt></pre>
</div></div>
<div class="listingblock">
<div class="title">Mac, FreeBSD, Linux</div>
<div class="content">
<pre><tt>git clone git://zuse.jp/git/tanasinn.git
cd tanasinn
./configure
ln -s $PWD $RUNTIME/tanasinn
ln $PWD/modules/tanasinn-vimp.js $RUNTIME/plugin/</tt></pre>
</div></div>
<div class="listingblock">
<div class="title">Windows Vista/7 + Cygwin</div>
<div class="content">
<pre><tt>git clone git://zuse.jp/git/tanasinn.git
cd tanasinn
./configure
$(cygpath $COMSPEC) /c mklink /D "$(cygpath -w "$RUNTIME/tanasinn")" "$(cygpath -w "$PWD")";
ln $PWD/modules/tanasinn-vimp.js $RUNTIME/plugin/</tt></pre>
</div></div>
<div class="paragraph"><div class="title">Windows XP + Cygwin</div><p>To make Windows native symbolic link, you may need to install <a href="http://www.microsoft.com/download/en/details.aspx?DisplayLang=en%2cen&amp;id=17657">Windows Server 2003 Resource Kit Tools</a>.</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>git clone git://zuse.jp/git/tanasinn.git
cd tanasinn
./configure
$(cygpath $COMSPEC) /c linkd.exe "$(cygpath -w "$RUNTIME/tanasinn")" "$(cygpath -w "$PWD")";
ln $PWD/modules/tanasinn-vimp.js $RUNTIME/plugin/</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>$RUNTIME is Vimperator/Muttator runtime directory such as '$HOME/.{vimperator,muttator}'.</tt></pre>
</div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_usage">Usage</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_launching_terminal">Launching terminal</h3>
<div class="imageblock">
<div class="content">
<img src="images/launcher.png" alt="images/launcher.png" width="480" />
</div>
</div>
<div class="sect3">
<h4 id="_if_it_is_installed_as_add_on">If it is Installed as Add-on:</h4>
<div class="literalblock">
<div class="content">
<pre><tt>Pressing control key twice (ctrl + ctrl), it shows Commandline Launcher interface.
For example, if you type "man man[Enter key]" to this launcher textbox,
window-like UI emerges into browser chrome window and display manpage.</tt></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_if_it_is_installed_as_vimperator_muttator_plugin">If it is Installed as Vimperator/Muttator plugin:</h4>
<div class="literalblock">
<div class="content">
<pre><tt>You can launch tanasinn as same as Add-on version, by pressing control key twice (ctrl + ctrl).
For displaying launcher interface from commandline, type as follows:</tt></pre>
</div></div>
<div class="listingblock">
<div class="content">
<pre><tt>:tanasinnlaunch</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>Or, if you would like to launch terminal screen in direct, type as below:</tt></pre>
</div></div>
<div class="listingblock">
<div class="content">
<pre><tt>:tanasinncommand &lt;command line&gt;</tt></pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="_basic_operating_procedure">Basic operating procedure</h3>
<div class="literalblock">
<div class="content">
<pre><tt>It is similar to well-known terminal emulators, like xterm.
but including specific features as follows.</tt></pre>
</div></div>
<div class="literalblock">
<div class="title">shift + shift (shift key twice)</div>
<div class="content">
<pre><tt>switch input focus between terminal and commandline textbox.</tt></pre>
</div></div>
<div class="literalblock">
<div class="title">shift + mouse drag</div>
<div class="content">
<pre><tt>move window.</tt></pre>
</div></div>
<div class="literalblock">
<div class="title">alt + mouse select</div>
<div class="content">
<pre><tt>select rectangle region. (like Terminal.app)</tt></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_using_commandline_interface">Using commandline interface</h3>
<div class="imageblock">
<div class="content">
<img src="images/commandline.png" alt="images/commandline.png" width="480" />
</div>
</div>
<div class="literalblock">
<div class="content">
<pre><tt>The specification of commands is not frozen. Comming soon...
Now the implementation of this part is written by rush job, commandline parser
is not proper one.</tt></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_user_directory">User directory</h3>
<div class="listingblock">
<div class="content">
<pre><tt>  ~/
   |
   +-- .tanasinn.js    &lt;-------------------------------- (1)
   |
   +-- .tanasinn/      &lt;-------------------------------- (2)
         |
         +-- sessions.txt        &lt;---------------------- (3)
         |
         +-- desktop_profile/    &lt;---------------------- (4)
         |
         +-- session_profile/    &lt;---------------------- (5)
         |
         +-- persist/            &lt;---------------------- (6)
         |
         +-- log/                &lt;---------------------- (7)
         |
         +-- modules/            &lt;---------------------- (8)
                |
                +-- static_components/           &lt;------ (9)
                |
                +-- static_dynamic_components/   &lt;------ (10)
                |
                +-- dynamic_components/          &lt;------ (11)</tt></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_setting_configuration_variables">Setting configuration variables.</h3>
<div class="paragraph"><p>example)</p></div>
<div class="literalblock">
<div class="content">
<pre><tt>~/.tanasinn.js</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>process.cygwin_root = "C:\\cygwin";
process.bin_path = "/bin:/usr/bin:/usr/local/bin:/opt/local/bin";
process.python_path = "/usr/bin/python"</tt></pre>
</div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tips">Tips</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_to_enable_disable_plugins">To enable/disable plugins.</h3>
<div class="paragraph"><p>Type it in the command-line input field.</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>enable &lt;plugin id&gt;</tt></pre>
</div></div>
<div class="listingblock">
<div class="content">
<pre><tt>disable &lt;plugin id&gt;</tt></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_to_save_load_session_8217_s_settings">To save/load session&#8217;s settings.</h3>
<div class="paragraph"><p>To persist the state of current session (font, color, screen size, &#8230;etc), Type it in the command-line input field.</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>saveprofile</tt></pre>
</div></div>
<div class="paragraph"><p>Then current session&#8217;s configuration settings will be persisted to
"$HOME/.tanasinn/profile/default.js".
If you would like to save it as other file name, type as follows:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>saveprofile &lt;profile name&gt;</tt></pre>
</div></div>
<div class="paragraph"><p>Therefore the settings will be persisted to "$HOME/.tanasinn/profile/&lt;profile name&gt;.js".</p></div>
<div class="paragraph"><p>And to load it again, type as follows:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>loadprofile &lt;profile name&gt;</tt></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_to_detach_from_current_session">To detach from current session.</h3>
<div class="paragraph"><p>Type it in the command-line input field.</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>detach</tt></pre>
</div></div>
<div class="paragraph"><p>The session will be suspended. and you can reconnect to it from launcher interface.</p></div>
</div>
<div class="sect2">
<h3 id="_to_kill_current_session">To kill current session.</h3>
<div class="paragraph"><p>Type it in the command-line input field.</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>kill</tt></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_how_to_hook_lt_c_i_gt_edit_input_field_by_external_editor_and_gf_view_source_in_external_viewer_mappings_if_tanasinn_is_installed_as_vimperator_muttator_plugin">How to Hook "&lt;C-i&gt;"(edit input field by external editor) and "gF"(view source in external viewer) mappings if tanasinn is Installed as Vimperator/Muttator plugin.</h3>
<div class="paragraph"><p>If you would like to edit input field by external editor on tanasinn,
add following command to your vimperatorrc/muttatorrc.</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>let g:tanasinneditorcommand="vim %"</tt></pre>
</div></div>
<div class="paragraph"><p>It requires "vim" command on your system.
<em>%</em> is to be replaced with a temporary file path.</p></div>
<div class="paragraph"><p>To view HTML source on tanasinn, add following command.</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>let g:tanasinnviewsourcecommand="vim +e '%'"</tt></pre>
</div></div>
<div class="paragraph"><p><em>%</em> is to be replaced with an escaped URL string.
This example requires "vim" command on your system.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_known_issues">Known issues</h2>
<div class="sectionbody">
<div class="ulist"><ul>
<li>
<p>
In Windows + Cygwin environment, booting and emulation performance is so damn slow!!
</p>
</li>
<li>
<p>
At SandS(Space and Shift) keyboard environment, shift + shift
   (shift key twice) key sequence are detected by space + space, unfortunately!!
   I think something other way for it should be provided.
</p>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="_developing_component_plugin_tutorial">Developing component/plugin - Tutorial</h2>
<div class="sectionbody">
</div>
</div>
<div class="sect1">
<h2 id="_developing_materials">Developing materials</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_hierarchical_event_broker_pattern">Hierarchical event broker pattern</h3>
<div class="listingblock">
<div class="content">
<pre><tt>                                                +----------------+
                                                |                |
                                                |                |
    +-----------------------+     +-------------A------------+   |   +---------------------+
    |                       |     |                          +---+   |                     |
    | The Root Event Broker +----&lt;| EventBroker &amp; Component  =------&lt;| Component or Plugin |
    |                       |     |                          |       |                     |
    +-----------------------+     +---------------------------       +---------------------+</tt></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_event_bus">Event bus</h3>
<div class="listingblock">
<div class="content">
<pre><tt>                            +---------+
                            | Process |             &lt;---- corresponds to application process.
                            +----+----+
                                 |
        Process bus   -----------+---+------- ....
                                     |
                                +----+----+
                                | Desktop |         &lt;---- corresponds to chrome window.
                                +----+----+
                                     |
        Desktop bus    ----+---------+------+------- ....
                           |                |
                      +----+-----+     +----+----+
                      | Launcher |     | Session |  &lt;---- corresponds to terminal screen.
                      +----------+     +----+----+
                                            |
        Session bus    .... -------+--------+---+-----------+------- ....
                                   |            |           |
                             +----------+  +----+----+  +---------+
                       ....  | renderer |  |   tty   |  | screen  |  ....
                             +----------+  +---------+  +---------+</tt></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_object_system">Object system</h3>
<div class="sect3">
<h4 id="_class_and_aspect">Class and Aspect</h4>
</div>
<div class="sect3">
<h4 id="_processing_decorated_annotated_member_name">Processing decorated (annotated) member name</h4>
</div>
<div class="sect3">
<h4 id="_attributes">Attributes</h4>
<div class="sect4">
<h5 id="_serializeable">serializeable</h5>
</div>
<div class="sect4">
<h5 id="_watchable">watchable</h5>
</div>
<div class="sect4">
<h5 id="_listen">listen</h5>
</div>
<div class="sect4">
<h5 id="_subscribe">subscribe</h5>
</div>
<div class="sect4">
<h5 id="_sequence">sequence</h5>
</div>
<div class="sect4">
<h5 id="_command">command</h5>
</div>
<div class="sect4">
<h5 id="_nmap">nmap</h5>
</div>
<div class="sect4">
<h5 id="_cmap">cmap</h5>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_plug_and_play_dynamic_module_loading">Plug-and-play dynamic module loading</h3>
</div>
<div class="sect2">
<h3 id="_event_js_event_system">event.js / Event system</h3>
<div class="paragraph"><p>Defines class EventBroker, which is able to interpret and evaluate
"Topic" and "Event Expression".</p></div>
<div class="sect3">
<h4 id="_topic_overview">"Topic" Overview</h4>
<div class="literalblock">
<div class="content">
<pre><tt>In this event system, registered events is concerned by "topic" that
is string variable consists of some digits and alphabets.</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>If you registered an event as follows:</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>var id = broker.subscribe(&lt;topic&gt;, &lt;handler&gt;, ....);</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>This event handler could be fired as following code:</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>broker.notify(&lt;topic&gt;);</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>The subscribe method returns an ID string.
When you want to unregister handler, use it as follows:</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>broker.unsubscribe(id);</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>NOTE that this ID is NOT corresponds to a handler, one-to-one.
The relation between Topic-ID is as same as that, because this event
system is based on the concept of multicast delegate system.</tt></pre>
</div></div>
<div class="listingblock">
<div class="content">
<pre><tt>   +----------+ n      1 +-----------+ n      1 +-----------+
   | handler  |&gt;---------|    ID     |&gt;---------|   topic   |
   +----------+          +-----------+          +-----------+</tt></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_event_expression_overview">"Event Expression" Overview</h4>
<div class="literalblock">
<div class="content">
<pre><tt>Event Expression indicates how the broker waits multiple events.
It was given to subscriber method, that called such as:</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>broker.subscribe(&lt;expression&gt;, ....);</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>&lt;expression&gt; consists of 1 or multiple event topics and other tokens,
that ruled by simple grammar. the detail of it is as below...</tt></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_crammer_of_event_expression">Crammer of Event Expression</h4>
<div class="listingblock">
<div class="content">
<pre><tt>   IdentifierCharacter := '_' | '-' | digit | alphabet

   NormalToken := IdentifierCharacter, IdentifierCharacter*

   GlobToken := '{', NormalToken, '}'
              | '{', NormalToken, '}', NormalToken
              | NormalToken, '{', NormalToken, '}'
              | NormalToken, '{', NormalToken, '}', NormalToken

   GlobToken := NormalToken | GlobToken

   PrimaryExpression := Token | '(', Expression, ')'

   UnaryOperator := '@' | '~'

   UnaryExpression := PrimaryExpression | UnaryOperator, PrimaryExpression

   BinaryOperator := 'and' | 'or' | '&amp;' | '|'

   BinaryExpression := UnaryExpression | UnaryExpression, BinaryOperator, UnaryExpression

   Expression := BinaryExpression</tt></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_event_expression_example">Event Expression Example</h4>
<div class="ulist"><ul>
<li>
<p>
case 1.
</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content">
<pre><tt>     "A"</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>-&gt; it triggered when the event "A" is signaled.</tt></pre>
</div></div>
<div class="ulist"><ul>
<li>
<p>
case 2.
</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content">
<pre><tt>     "A | B"</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>-&gt; wait for multiple events "A" OR "B".
   it is triggered when one of either events is signaled.</tt></pre>
</div></div>
<div class="ulist"><ul>
<li>
<p>
case 3.
</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content">
<pre><tt>     "A &amp; B"</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>-&gt; wait for both events "A" AND "B"
   it is triggered when both of these events is signaled.</tt></pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="_ttydriver_py_tty_driver">ttydriver.py / TTY Driver</h3>
<div class="sect3">
<h4 id="_module_overview">Module Overview</h4>
<div class="paragraph"><p>This module is assumed to be called by tanasinn&#8217;s "tty.js".
First, tanasinn opens TCP channel and listen on 2 ports, [I/O channel] and
[Control channel].
Next, tanasinn should call this script, with 2 arguments that is represent
above-mentioned 2 channel&#8217;s port numbers.
Then, A TeletypeDriver object is instantiate. it connect these channels and
establish TCP connection, and finally forks new 4 processes as follows:</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
Application Process
   This is user-specified application process, launched by command such as
   the following.
</p>
</li>
</ol></div>
<div class="listingblock">
<div class="content">
<pre><tt>      /bin/sh -c 'exec &lt;startcommand&gt;'</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>&lt;startcommand&gt; is asked for tanasinn through the &lt;Control channel&gt;.</tt></pre>
</div></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
Writing Process
   This process wait to receive data from tanasinn through &lt;I/O channel&gt;,
   which is user&#8217;s input key sequence in many cases.
   As receiving data, the Process passes it to TTY master device as it is.
</p>
</li>
<li>
<p>
Reading Process
   This process wait to receive data from TTY master device, which is output
   sequence from application program in many cases.
   As receiving data, the Process passes it to tanasinn through [I/O channel].
</p>
</li>
<li>
<p>
Controlling Process
   This process communicate with tanasinn through [Control channel] in
   simple, lightweight, 7bit ascii-based protocol.
</p>
</li>
</ol></div>
<div class="listingblock">
<div class="content">
<pre><tt>   TTY Device pair            Python script                   tanasinn
   Master / Slave          class TeletypeDriver                 tty.js
 +-----------------+       +------------------+           +-----------------+
 |                 |       |                  |           |                 |
 | +-------------+ |       | +--------------+ |           | +-------------+ |
 | |             |----------&gt;| Writing Proc |&lt;--- recv -----|             | |
 | |             | | read  | +--------------+ |           | |             | |
 | |             | |       |                  &lt;I/O channel&gt; | I/O Manager | |
 | |             | |       | +--------------+ |           | |             | |
 | |   Master    |&lt;----------| Reading Proc |---- send ----&gt;|             | |
 | |             | | write | +--------------+ |           | +-------------+ |
 | |             | |       |                  |           |                 |
 | |             | |       | +--------------+ |           | +-------------+ |
 | |             |&lt;---------&gt;| Control Proc |&lt;- send/recv -&gt;| Controller  | |
 | +-------------+ | ioctl | +--------------+ |           | +-------------+ |
 |        |        |       |                &lt;Control channel&gt;               |
 | +-------------+ |       | +--------------+ |           +-----------------+
 | |    Slave    |&lt;---------&gt;|   App Proc   | |
 | +-------------+ | stdio | +--------------+ |
 |                 |       |                  |
 +-----------------+       +------------------+</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>figure-1. Communication among TTY device pair, TeletypeDriver, tanasinn.</tt></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_about_control_channel_s_protocol">About [Control channel]'s protocol</h4>
<div class="sect4">
<h5 id="_protocol_overview">Protocol Overview</h5>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
This protocol is line-oriented. line terminator is <em>\n</em> (0x0a).
</p>
</li>
<li>
<p>
This protocol is command-based. 1 line should be interpreted as 1
       command.
       A command is composed of 1 or multiple tokens. delimiter character is
       ' ' (0x20).
</p>
</li>
<li>
<p>
First token is &lt;b&gt;opecode&lt;/b&gt;, represent a operation.
       An opecode consists of lower-case alphabetic sets ([a-z]+).
</p>
</li>
<li>
<p>
Tokens after &lt;b&gt;opecode&lt;/b&gt; represent arguments.
       An arguments consists of multiple printable characters, that is
       encoded in base64 Data Encoding, defined in RFC-3548.
</p>
</li>
</ol></div>
<div class="listingblock">
<div class="content">
<pre><tt>       example 1:
         xoff\n</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>Opecode of this command is "xoff". "\n" is line terminator.</tt></pre>
</div></div>
<div class="listingblock">
<div class="content">
<pre><tt>       example 2:
         resize ODA= MjQ=\n</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>In this case, opecode is "resize".
Arguments are "ODA=" and "MjQ=", these strings mean "80" and "24"
when decoded.</tt></pre>
</div></div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_builder_js_xul_dynamic_construction">builder.js / XUL dynamic construction</h3>
<div class="paragraph"><p>Accept UI-template object and convert it to a tree of DOM element.</p></div>
<div class="sect3">
<h4 id="_ui_template_overview">UI-template overview</h4>
<div class="literalblock">
<div class="content">
<pre><tt>UI-template is JSON-style object that is described as based on the
specific rule.
It is to be converted to a node set of XUL/HTML/SVG elements by
"Template Builder" object.</tt></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_examples">Examples</h4>
<div class="paragraph"><p>Example 1:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>   ({                          // &lt;--- (1)
     tagName: "box",           // &lt;--- (2)
     flex: 1,
     style: {                  // &lt;--- (3)
       backgroundColor: "red"  // &lt;--- (4)
     }
   })</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>It will be converted to following XUL element.</tt></pre>
</div></div>
<div class="listingblock">
<div class="content">
<pre><tt>     &lt;box flex="1" style="background-color: red;"/&gt;</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>Every UI-template object consists of &lt;Element node&gt; (1), and it is
typically a tree set of &lt;Element node&gt;s.
It always includes "tagName" property (2), and often includes
&lt;Style node&gt; (3).
&lt;Style node&gt; may have some CSS properties in camel-case (4).</tt></pre>
</div></div>
<div class="paragraph"><p>Example 2:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>   ({
     tagName: "html:div",
     parentNode: "id-of-parent", // &lt;--- (5)
     style: {
       textAlign: "center"
     }
     childNodes: {               // &lt;--- (6)
       tagName: "html:div",
       style: {
         fontSize: "1.5em"
       },
       childNodes: [             // &lt;--- (7)
         {
           tagName: "html:span",
           innerText: "abcde"    // &lt;--- (8)
         },
         {
           tagName: "html:div",
         }
       ]
     }
   })</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>It will be converted as below.</tt></pre>
</div></div>
<div class="listingblock">
<div class="content">
<pre><tt>   &lt;html:div style="text-align: center;"&gt;
     &lt;html:div style="font-size: 1.5em;"&gt;
       &lt;html:span&gt;abcde&lt;/html:span&gt;
       &lt;html:div/&gt;
     &lt;/html:span&gt;
   &lt;/html:div&gt;</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>The "parentNode" property (5) indicates at which the current node is to
be set. if the type of property value was "string", it regards as node
ID of the parent node. or if its type is "object", especially
HTMLElement, it regards as the parent node object itself.
The "childNodes" property has an effect which cascades down
following &lt;Element node&gt; (6). If you wanted to create two or more
child nodes under the same node, you should substitute an Array of
&lt;Element node&gt;s (7) in "childNodes" property.
The "innerText" property (8) creates a text node under current
&lt;Element node&gt;.</tt></pre>
</div></div>
<div class="paragraph"><p>Example 2:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>   ({
     tagName: "hbox",
     id: "parent",
     flex: 1,
     onconstruct: {              // &lt;--- (9)
       handler: function() { window.alert(this.id); }
     },
     childNodes: [
       {
         tagName: "vbox",
         id: "left",
         flex: 1,
         listener: {             // &lt;--- (10)
           type: "mouseover",
           context: window,
           handler: onMouseOver
         }
       },
       {
         tagName: "vbox",
         id: "right",
         flex: 1,
         listener: [
           {
             type: "mouseup",
             handler: onMouseUp
           },
           {
             type: "mousedown",
             handler: onMouseDown
           }
         ]
       }
     ]
   })</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>It almost corresponds to following XUL code.</tt></pre>
</div></div>
<div class="listingblock">
<div class="content">
<pre><tt>   &lt;hbox id="parent" flex="1"&gt;
     &lt;vbox id="left" flex="1" onmouseover=""/&gt;
     &lt;vbox id="right" flex="1"/&gt;
   &lt;/hbox&gt;
   &lt;script type="application/x-javascript"/&gt;
     &lt;![CDATA[
       var parent = document.getElementById("parent");
       var left = document.getElementById("left");
       var right = document.getElementById("right");
       (function() window.alert(this.id)).apply(parent);
       left.addEventListener("mouseover", function() {
         onMouseOver.apply(window, arguments);
       }, false);
       right.addEventListener("mouseup", onMouseUp, false);
       right.addEventListener("mousedown", onMouseOver, false);
     ]]&gt;
   &lt;/script&gt;</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>The "onconstruct" property (9) defines a event function which fired
when the property itself is parsed.
The "listener" property (10) attaches a event handler at the current
&lt;Element node&gt;.</tt></pre>
</div></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_bug_reports_and_patches">Bug reports and patches</h2>
<div class="sectionbody">
<div class="paragraph"><p>Patches and bug reports are are encouraged. &gt; saitoha &lt;<a href="mailto:user@zuse.jp">user@zuse.jp</a>&gt;,
or tweet me (<a href="http://twitter.com/feel_tanasinn">English</a> / <a href="http://twitter.com/kefir_">Japanese</a>).</p></div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated 2012-02-06 00:45:37 JST
</div>
</div>
</body>
</html>
