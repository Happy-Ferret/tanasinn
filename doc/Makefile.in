
CPP=@CPP@
ASCIIDOC=@ASCIIDOC@
OPEN=@TANASINN_OPEN@
ASCIIDOCFLAGS= -a toc -a icons -a toc2 -a theme=flask 

all: usermanual-ja.html usermanual.html

Makefile: Makefile.in
	cd .. && ./configure

usermanual.html: usermanual.txt Makefile.in
	if [ -n "$(ASCIIDOC)" ] && [ -n "$(CPP)" ]; \
	then \
		$(RM) $@ && cat $< \
		| $(CPP) -D__EN__ - \
		| sed -e 's:/#/://:g' \
		| sed -e 's/^#.*//' \
		| $(ASCIIDOC) $(ASCIIDOCFLAGS) - > $@; \
	fi

usermanual-ja.html: usermanual.txt Makefile.in
	if [ -n "$(ASCIIDOC)" ] && [ -n "$(CPP)" ]; \
	then \
		$(RM) $@ && cat $< \
		| $(CPP) -D__JP__ - \
		| sed -e 's:/#/://:g' \
		| sed -e 's/^#.*//' \
		| $(ASCIIDOC) $(ASCIIDOCFLAGS) - > $@; \
	fi

clean:
	rm *.html

