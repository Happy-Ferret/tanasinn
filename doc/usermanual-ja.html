<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.6" />
<title>tanasinn terminal emulator</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

pre {
  padding: 0;
  margin: 0;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #777777;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }


/*
 * xhtml11 specific
 *
 * */

tt {
  font-family: monospace;
  font-size: inherit;
  color: navy;
}

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

.monospaced {
  font-family: monospace;
  font-size: inherit;
  color: navy;
}

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


/*
 * Theme specific overrides of the preceding (asciidoc.css) CSS.
 *
 */
body {
  font-family: Garamond, Georgia, serif;
  font-size: 17px;
  color: #3E4349;
  line-height: 1.3em;
}
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Garmond, Georgia, serif;
  font-weight: normal;
  border-bottom-width: 0;
  color: #3E4349;
}
div.title, caption.title { color: #596673; font-weight: bold; }
h1 { font-size: 240%; }
h2 { font-size: 180%; }
h3 { font-size: 150%; }
h4 { font-size: 130%; }
h5 { font-size: 115%; }
h6 { font-size: 100%; }
#header h1 { margin-top: 0; }
#toc {
  color: #444444;
  line-height: 1.5;
  padding-top: 1.5em;
}
#toctitle {
  font-size: 20px;
}
#toc a {
    border-bottom: 1px dotted #999999;
    color: #444444 !important;
    text-decoration: none !important;
}
#toc a:hover {
    border-bottom: 1px solid #6D4100;
    color: #6D4100 !important;
    text-decoration: none !important;
}
div.toclevel1 { margin-top: 0.2em; font-size: 16px; }
div.toclevel2 { margin-top: 0.15em; font-size: 14px; }
em, dt, td.hdlist1 { color: black; }
strong { color: #3E4349; }
a { color: #004B6B; text-decoration: none; border-bottom: 1px dotted #004B6B; }
a:visited { color: #615FA0; border-bottom: 1px dotted #615FA0; }
a:hover { color: #6D4100; border-bottom: 1px solid #6D4100; }
div.tableblock > table, table.tableblock { border: 3px solid #E8E8E8; }
th.tableblock, td.tableblock { border: 1px solid #E8E8E8; }
ul > li > * { color: #3E4349; }
pre, tt, .monospaced { font-family: Consolas,Menlo,'Deja Vu Sans Mono','Bitstream Vera Sans Mono',monospace; }
tt, .monospaced { font-size: 0.9em; color: black;
}
div.exampleblock > div.content, div.sidebarblock > div.content, div.listingblock > div.content { border-width: 0 0 0 3px; border-color: #E8E8E8; }
div.verseblock { border-left-width: 0; margin-left: 3em; }
div.quoteblock { border-left-width: 3px; margin-left: 0; margin-right: 0;}
div.admonitionblock td.content { border-left: 3px solid #E8E8E8; }
@media screen {
  body {
    max-width: 50em; /* approximately 80 characters wide */
    margin-left: 16em;
  }

  #toc {
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    width: 13em;
    padding: 0.5em;
    padding-bottom: 1.5em;
    margin: 0;
    overflow: auto;
    border-right: 3px solid #f8f8f8;
    background-color: white;
  }

  #toc .toclevel1 {
    margin-top: 0.5em;
  }

  #toc .toclevel2 {
    margin-top: 0.25em;
    display: list-item;
    color: #aaaaaa;
  }

  #toctitle {
    margin-top: 0.5em;
  }
}
</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([2-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install(2);
/*]]>*/
</script>
</head>
<body class="article">
<div id="header">
<h1>tanasinn terminal emulator</h1>
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph"><p><a href="./usermanual.html">English/英語</a></p></div>
</div>
</div>
<div class="sect1">
<h2 id="_概要">概要</h2>
<div class="sectionbody">
<div class="literalblock">
<div class="content">
<pre><tt>"tanasinn terminal emulator" は Firefox/Thunderbird/SeaMonkey上で動作する端末エミュレータです。
Windows(XP/Vista/7) + Cygwin / Mac / Linux / FreeBSD 環境で動作します。
ほぼJavascriptによる実装(2%のPython)。
コマンドラインシェルやcursesベースのアプリケーション等、オペレーティングシステムが提供する
柔軟でパワフルな機能群にブラウザ上のUIからアクセスすることができます。</tt></pre>
</div></div>
</div>
</div>
<div class="sect1">
<h2 id="_news">News</h2>
<div class="sectionbody">
<div class="literalblock">
<div class="title">2012/02/04 バージョン0.1.5.3</div>
<div class="content">
<pre><tt>重要：0.1.5.0 / 0.1.5.1はビルド時のバグのため「動きません」。
      0.1.5.2は一部のプラットフォームで動きません。
      いろいろ試行錯誤しちゃった人はすみません。</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>Python2.x系のパスやCygwinのルートディレクトリなどを探しまわり、環境情報を推定しようとします。</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>動かなかった場合は ~/.tanasinn.js に、このように書いてみてください。</tt></pre>
</div></div>
<div class="listingblock">
<div class="content">
<pre><tt>process.cygwin_root = "C:\\cygwin";
process.bin_path = "/bin:/usr/bin:/usr/local/bin:/opt/local/bin";
process.python_path = "/usr/bin/python"</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>それでもだめな環境もあるかもしれません。
こちらからはtwitter用ハッシュタグ #tanasinn / #tanasinnが動かない あたりで探してみます。</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>拡張フォルダ内のディレクトリ名が歴史的理由により意味不明になっていたので、かなり変えました。</tt></pre>
</div></div>
<div class="sect2">
<h3 id="_ダウンロード_ライセンス">ダウンロード/ライセンス</h3>
<div class="literalblock">
<div class="content">
<pre><tt>Mozilla Public License 1.1 (MPL1.1) で配布しています。
チュートリアルを書き終わるまで、スナップショット版しか提供しません。
現在開発者がオープンソースにおけるソースコードの共有のしかたとワークフローモデルについて必死に勉強中です。
そこそこgitが使えるようになってきたら、安定したリリースビルドを提供していきたいと考えています。</tt></pre>
</div></div>
<div class="ulist"><ul>
<li>
<p>
スナップショット版: <a href="http://zuse.jp/tanasinn/tanasinn-current.xpi">ダウンロード</a>
</p>
</li>
<li>
<p>
過去のバージョン (0.1.5.4): <a href="http://zuse.jp/tanasinn/downloads/versions/">http://zuse.jp/tanasinn/downloads/versions/</a>
</p>
</li>
<li>
<p>
git repo: git://zuse.jp/git/tanasinn.git
</p>
</li>
<li>
<p>
gitweb: <a href="http://zuse.jp/git/?p=tanasinn.git">http://zuse.jp/git/?p=tanasinn.git</a>
</p>
</li>
</ul></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_特色">特色</h2>
<div class="sectionbody">
<div class="ulist"><ul>
<li>
<p>
Geckoベースのユーザーインターフェース (HTML Canvas + XUL)。柔軟でカスタマイズが容易です。
</p>
</li>
<li>
<p>
マルチプラットフォーム。現在サポートされるのは、Mac / FreeBSD / Linux(というかUbuntu) /
      Windows(XP/Vista/7) + <a href="http://www.cygwin.com">Cygwin</a>環境 (POSIX版Pythonが必要)
</p>
</li>
<li>
<p>
プラグインアーキテクチャ。プラグアンドプレイでのインストール・アンインストールが可能。
</p>
</li>
<li>
<p>
ブラウザを再起動したり閉じたりしている間、ターミナルセッションを保持します。
      サスペンドしたセッションに後から再接続できます。
</p>
</li>
<li>
<p>
デバッガ内臓。ステップ実行やトレースができます。
      ターミナルとアプリケーションがやり取りするI/Oシーケンスをリアルタイムで観察できます。
</p>
</li>
<li>
<p>
スクロールバック、代替スクリーン、ビジュアルベル、オーディオベルなど基本的な機能はサポートしています。
</p>
</li>
<li>
<p>
IMEが使えます。
</p>
</li>
<li>
<p>
East Asian Width(ひらがななどの文字幅を考慮したレンダリング)に一応対応しています。
      B集合以降のCJK統合拡張漢字等、サロゲートペアで表現される文字にも対応しています。
      異体字セレクタ、インド系諸語等で頻出する合字やアラビア系文字の置換などの複雑なグリフ処理は、
      現在主にパフォーマンス上の理由により実装されませんが、 別途プラグインで対応することも可能です。
      bidiには完全に対応できていないと思います。
</p>
</li>
<li>
<p>
地域化のサポート。gettextのようなスタイルを採用しています。
      ローカライズリソースをUI上から編集することができます。
</p>
</li>
<li>
<p>
Geckoがサポートする様々なエンコーディングを指定できます。
</p>
</li>
<li>
<p>
ウィンドウの透明化をサポート。これはブラウジングしながらターミナルで作業したい時に便利です。
</p>
</li>
<li>
<p>
xtermのようなマウスエミュレーションができます。ホイールスクロールにも対応。
</p>
</li>
<li>
<p>
テキストの選択や矩形選択ができます。
</p>
</li>
<li>
<p>
ドラッグアンドドロップやキーボードショートカットによる選択テキストのコピー・ペーストが可能です。
</p>
</li>
<li>
<p>
ドラッグによる移動・リサイズができます。
</p>
</li>
<li>
<p>
256色表示対応。32bitカラーをパレットに割り当てることができます。
</p>
</li>
<li>
<p>
VimperatorやKeysnailのようなコマンドラインインターフェース。
</p>
</li>
<li>
<p>
Vimperator/Muttator のプラグインとして導入することができます。必要なら"&lt;C-i&gt;"や"gF"マッピングをフックすることができます。
</p>
</li>
<li>
<p>
スタンドアロンのXULアプリケーションとして動作させることができます。(現在はかなりバギーです!)
</p>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="_スクリーンショット">スクリーンショット</h2>
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="images/bb2.png" alt="images/bb2.png" width="780" />
</div>
<div class="title">Figure 1. "<a href="http://w3m.sourceforge.net/index.en.html">BB</a>"(アスキーアートのデモプログラム)を走らせたところ。</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/color2.png" alt="images/color2.png" width="780" />
</div>
<div class="title">Figure 2. <a href="http://code.google.com/p/myminios/source/browse/trunk/colortable16.sh?r=10">colortable.sh</a> and <a href="http://code.google.com/p/joeldotfiles/source/browse/trunk/256colors2.pl">256color2.pl</a>でカラーチャートを表示させたところ。</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/ime2.png" alt="images/ime2.png" width="780" />
</div>
<div class="title">Figure 3. IMEで日本語を打ってみたところ (<a href="http://aquaskk.sourceforge.jp/">AquaSKK</a>使用)。</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/scroll2.png" alt="images/scroll2.png" width="780" />
</div>
<div class="title">Figure 4. スクロールバーインターフェースは必要なときにあらわれます(OSX Lionのように)。</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/overlay2.png" alt="images/overlay2.png" width="780" />
</div>
<div class="title">Figure 5. オーバーレイインジケータがフォントサイズ、ウィンドウサイズ、タイトルバーメッセージが変更されたときなどに表示されます。</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/completion2.png" alt="images/completion2.png" width="780" />
</div>
<div class="title">Figure 6. <a href="http://vimperator.org/vimperator">Vimperator</a> や <a href="https://github.com/mooz/keysnail/wiki/">Keysnail</a> にインスパイアされたコマンドラインインターフェース。</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/fontfamily2.png" alt="images/fontfamily2.png" width="780" />
</div>
<div class="title">Figure 7. フォントファミリを選択しています。</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/fontsize2.png" alt="images/fontsize2.png" width="780" />
</div>
<div class="title">Figure 8. フォントサイズを選択しています。</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/launcher2.png" alt="images/launcher2.png" width="780" />
</div>
<div class="title">Figure 9. <a href="http://www.blacktree.com/">QuckSilver</a> や <a href="https://addons.mozilla.org/ja/firefox/addon/mozilla-labs-ubiquity/">Ubiquity</a> にインスパイアされたランチャーインターフェース。</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/session2.png" alt="images/session2.png" width="780" />
</div>
<div class="title">Figure 10. デタッチ済みのセッションに再接続しているところ。ブラウザがクラッシュしたり再起動しても安心です。</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/sl2.png" alt="images/sl2.png" width="780" />
</div>
<div class="title">Figure 11. "<a href="http://www.tkl.iis.u-tokyo.ac.jp/~toyoda/index_e.html">sl</a>" (ジョークウェア)を走らせたところ。</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/debug2.png" alt="images/debug2.png" width="780" />
</div>
<div class="title">Figure 12. セルフデバッギング。ターミナルI/Oシーケンスをリアルタイムにトレースしています。</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/vim.png" alt="images/vim.png" width="780" />
</div>
<div class="title">Figure 13. ポップアップメニューを表示しています。<a href="http://www.vim.org">Vim</a>の方をちょっと改造しました。</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/w3m2.png" alt="images/w3m2.png" width="780" />
</div>
<div class="title">Figure 14. ブラウザの中でブラウザ。プライベートパッチを当てた<a href="http://w3m.sourceforge.net/index.en.html">w3m</a>でインラインイメージを表示させました。ここまでくるとちょっと意味不明ですね。</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wl3.png" alt="images/wl3.png" width="780" />
</div>
<div class="title">Figure 15. メーラーの中でメーラー。<a href="http://www.gohome.org/wl/index.html">Wonderlust</a>をemacs上で動かしているものをThunderbird上で動かしています。</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/xulapp.png" alt="images/xulapp.png" width="780" />
</div>
<div class="title">Figure 16. tanasinnをtanasinnでメタ開発中。これはスタンドアロンXULアプリケーションとして動作させているところです。</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_将来的にサポートされる仕様">将来的にサポートされる仕様</h2>
<div class="sectionbody">
<div class="ulist"><ul>
<li>
<p>
エミュレーションの強化。今はとりあえずxterm系コンパチブルなエミュレーションで作ってますが、
      本来はterminfoエントリを見るべきでしょう。
</p>
</li>
<li>
<p>
カラースキーマのサポート。16色or256色のパレットをインポート/エクスポートできるように。
</p>
</li>
<li>
<p>
スキンのサポート。痛端末化が可能に。
</p>
</li>
<li>
<p>
cursesベースのアプリーションとの連携強化。
      端末アプリケーションからGeckoにアクセスしてポップアップとか動画表示とかOAuthとかやるための仕様の策定。
      特別なプラグインを書かずとも端末からyoutubeを見たりtwitterやったりできるようになります。
</p>
</li>
<li>
<p>
プラグイン開発用ドキュメント。
</p>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="_動作要件">動作要件</h2>
<div class="sectionbody">
<div class="ulist"><ul>
<li>
<p>
Firefox 4.02pre+ / Thunderbird 7.0a1+ / SeaMonkey 2.1+.
</p>
</li>
<li>
<p>
POSIX用にビルドされたPython (2.5+, Mac、FreeBSD、Linux、 または cygwin用のもの)。
      Python for Win32 や ActivePython 等はforkや仮想端末をサポートしないと思うのでダメしょう。
</p>
</li>
<li>
<p>
POSIX環境。
      もしWindowsをお使いでしたら、C:\cygwinにCygwinをインストールしてください。
</p>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="_インストール">インストール</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_firefox_thunderbird_seamonkey拡張としてビルドする">Firefox/Thunderbird/SeaMonkey拡張としてビルドする:</h3>
<div class="listingblock">
<div class="title">Mac, FreeBSD, Linux, Cygwin</div>
<div class="content">
<pre><tt>git clone git://zuse.jp/git/tanasinn.git
cd tanasinn
./configure
make</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>ビルドが成功すると、tanasinn@zuse.jpというXPIファイルが生成されます。
これをインストールしてください。</tt></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_vimperator_muttatorプラグインとしてインストール">Vimperator/Muttatorプラグインとしてインストール:</h3>
<div class="literalblock">
<div class="content">
<pre><tt>Vimperator/Muttatorのランタイムディレクトリ以下にリンクを作成します。</tt></pre>
</div></div>
<div class="listingblock">
<div class="title">Mac, FreeBSD, Linux</div>
<div class="content">
<pre><tt>git clone git://zuse.jp/git/tanasinn.git
cd tanasinn
./configure
ln -s $PWD $RUNTIME/tanasinn
ln $PWD/modules/tanasinn-vimp.js $RUNTIME/plugin/</tt></pre>
</div></div>
<div class="listingblock">
<div class="title">Windows Vista/7 + Cygwin</div>
<div class="content">
<pre><tt>git clone git://zuse.jp/git/tanasinn.git
cd tanasinn
./configure
$(cygpath $COMSPEC) /c mklink /D "$(cygpath -w "$RUNTIME/tanasinn")" "$(cygpath -w "$PWD")";
ln $PWD/modules/tanasinn-vimp.js $RUNTIME/plugin/</tt></pre>
</div></div>
<div class="paragraph"><div class="title">Windows XP + Cygwin</div><p>Windowsネイティブなシンボリックリンクを作成するために、<a href="http://www.microsoft.com/download/en/details.aspx?DisplayLang=en%2cen&amp;id=17657">Windows Server 2003 Resource Kit Tools</a> をインストールする必要があるかもしれません。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>git clone git://zuse.jp/git/tanasinn.git
cd tanasinn
./configure
$(cygpath $COMSPEC) /c linkd.exe "$(cygpath -w "$RUNTIME/tanasinn")" "$(cygpath -w "$PWD")";
ln $PWD/modules/tanasinn-vimp.js $RUNTIME/plugin/</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>$RUNTIMEは'$HOME/.{vimperator,muttator}'のようなVimperator/Muttatorのランタイムディレクトリです。</tt></pre>
</div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_使いかた">使いかた</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_端末の起動">端末の起動</h3>
<div class="imageblock">
<div class="content">
<img src="images/launcher.png" alt="images/launcher.png" width="480" />
</div>
</div>
<div class="sect3">
<h4 id="_拡張としてインストールした場合">拡張としてインストールした場合</h4>
<div class="literalblock">
<div class="content">
<pre><tt>Controlキーの2度押し (ctrl + ctrl) でコマンドラインランチャーインターフェースが出現します。
そこで例えば、"man man[Enterキー]" とタイプしてみてください。
ウィンドウのようなUIがブラウザウィンドウ内に現れ、manページが表示されると思います。</tt></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_vimperator_muttatorのプラグインとしてインストールした場合">Vimperator/Muttatorのプラグインとしてインストールした場合:</h4>
<div class="literalblock">
<div class="content">
<pre><tt>アドオン版と同様、Controlキーの2度押し (ctrl + ctrl) でtanasinnが起動します。
Vimperator/Muttatorのコマンドライン上から起動したい場合は、以下のようにタイプしてください。</tt></pre>
</div></div>
<div class="listingblock">
<div class="content">
<pre><tt>:tanasinnlaunch</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>もしターミナルスクリーンをVimperator/Muttatorから直接起動させたければ、以下のようにします:</tt></pre>
</div></div>
<div class="listingblock">
<div class="content">
<pre><tt>:tanasinncommand &lt;コマンド&gt;</tt></pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="_基本的な操作方法">基本的な操作方法</h3>
<div class="literalblock">
<div class="content">
<pre><tt>xtermのような端末エミュレータを使ったことがあれば大体いけると思いますが、
以下のような特筆すべき仕様もいくつかあります。</tt></pre>
</div></div>
<div class="literalblock">
<div class="title">shift + shift (shiftキーの2度押し)</div>
<div class="content">
<pre><tt>ターミナルとコマンドラインテキストボックスの間でフォーカスを切り替えます。</tt></pre>
</div></div>
<div class="literalblock">
<div class="title">shift + マウスドラッグ</div>
<div class="content">
<pre><tt>ウィンドウの移動。</tt></pre>
</div></div>
<div class="literalblock">
<div class="title">alt + マウスで範囲選択</div>
<div class="content">
<pre><tt>矩形選択。 (Terminal.appの真似)</tt></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_コマンドラインインターフェースを使う">コマンドラインインターフェースを使う</h3>
<div class="imageblock">
<div class="content">
<img src="images/commandline.png" alt="images/commandline.png" width="480" />
</div>
</div>
<div class="literalblock">
<div class="content">
<pre><tt>…仕様が全然固まってませんのでまだ書けません。
この部分は作りはじめて日が浅いので、これから色々考えます。
とりあえず、shift + shiftでコマンドラインにカーソルが移動します。</tt></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_ユーザーディレクトリ">ユーザーディレクトリ</h3>
<div class="listingblock">
<div class="content">
<pre><tt>~/ or %USERPROFILE%/
   |
   +-- .tanasinn.js    &lt;-------------------------------- (1)
   |
   +-- .tanasinn/      &lt;-------------------------------- (2)
         |
         +-- sessions.txt        &lt;---------------------- (3)
         |
         +-- desktop_profile/    &lt;---------------------- (4)
         |
         +-- session_profile/    &lt;---------------------- (5)
         |
         +-- persist/            &lt;---------------------- (6)
         |
         +-- log/                &lt;---------------------- (7)
         |
         +-- modules/            &lt;---------------------- (8)
                |
                +-- process_components/          &lt;------ (9)
                |
                +-- desktop_components/          &lt;------ (10)
                |
                +-- session_components/          &lt;------ (11)
                |
                +-- shared_components/           &lt;------ (12)</tt></pre>
</div></div>
<div class="sect3">
<h4 id="_tanasinn_js">.tanasinn.js</h4>
<div class="paragraph"><p>起動時(Processオブジェクトが生成されるタイミング)に読み込まれ、実行されるJavascriptファイル。</p></div>
</div>
<div class="sect3">
<h4 id="_tanasinn">.tanasinn/</h4>
<div class="paragraph"><p>ランタイムディレクトリ。</p></div>
</div>
<div class="sect3">
<h4 id="_tanasinn_desktop_profile">.tanasinn/desktop_profile/</h4>
<div class="paragraph"><p>Desktopオブジェクトの設定が書き出されるディレクトリ。</p></div>
</div>
<div class="sect3">
<h4 id="_tanasinn_session_profile">.tanasinn/session_profile/</h4>
<div class="paragraph"><p>Sessionオブジェクトの設定が書き出されるディレクトリ。</p></div>
</div>
<div class="sect3">
<h4 id="_tanasinn_persist">.tanasinn/persist/</h4>
<div class="paragraph"><p>休眠中のセッションが永続化されて書き出されるディレクトリ。</p></div>
</div>
<div class="sect3">
<h4 id="_tanasinn_log">.tanasinn/log/</h4>
<div class="paragraph"><p>ログが書き出されるディレクトリ。</p></div>
</div>
<div class="sect3">
<h4 id="_tanasinn_modules">.tanasinn/modules/</h4>
<div class="paragraph"><p>このディレクトリ内にユーザー拡張やユーザーデータが配置されます。</p></div>
</div>
<div class="sect3">
<h4 id="_tanasinn_modules_process_components">.tanasinn/modules/process_components/</h4>
<div class="paragraph"><p>プロセスバスに接続されるユーザー拡張が配置されるディレクトリ。</p></div>
</div>
<div class="sect3">
<h4 id="_tanasinn_modules_desktop_components">.tanasinn/modules/desktop_components/</h4>
<div class="paragraph"><p>デスクトップバスに接続されるユーザー拡張が配置されるディレクトリ。</p></div>
</div>
<div class="sect3">
<h4 id="_tanasinn_modules_session_components">.tanasinn/modules/session_components/</h4>
<div class="paragraph"><p>セッションバスに接続されるユーザー拡張が配置されるディレクトリ。</p></div>
</div>
<div class="sect3">
<h4 id="_tanasinn_modules_shared_components">.tanasinn/modules/shared_components/</h4>
<div class="paragraph"><p>デスクトップバス・セッションバス両方に接続されるユーザー拡張が配置されるディレクトリ。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_構成変数の設定">構成変数の設定</h3>
<div class="paragraph"><p>example)</p></div>
<div class="literalblock">
<div class="content">
<pre><tt>~/.tanasinn.js</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>process.cygwin_root = "C:\\cygwin";
process.bin_path = "/bin:/usr/bin:/usr/local/bin:/opt/local/bin";
process.python_path = "/usr/bin/python"</tt></pre>
</div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tips">Tips</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_モジュールの有効_無効を切り替えるには">モジュールの有効・無効を切り替えるには</h3>
<div class="paragraph"><p>コマンドラインから以下のようにタイプしてみてください。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>enable &lt;プラグインID&gt;</tt></pre>
</div></div>
<div class="listingblock">
<div class="content">
<pre><tt>disable &lt;プラグインID&gt;</tt></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_セッションの設定を永続化_ロードするには">セッションの設定を永続化・ロードするには</h3>
<div class="paragraph"><p>コマンドラインから以下のようにタイプしてみてください。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>saveprofile</tt></pre>
</div></div>
<div class="paragraph"><p>こうすれば現在のセッションの設定が "$HOME/.tanasinn/persist/default.js" へ書き出されるでしょう。
もし別の名前で書き出したければ:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>saveprofile &lt;プロファイル名&gt;</tt></pre>
</div></div>
<div class="paragraph"><p>これで設定が"$HOME/.tanasinn/profile/&lt;プロファイル名&gt;.js"に書き出されます。</p></div>
<div class="paragraph"><p>この設定を再び読み込むには以下のようにします:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>loadprofile &lt;プロファイル名&gt;</tt></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_現在のセッションからデタッチするには">現在のセッションからデタッチするには</h3>
<div class="paragraph"><p>コマンドラインから以下のようにタイプしてみてください。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>detach</tt></pre>
</div></div>
<div class="paragraph"><p>セッションはサスペンドされます。ランチャーインターフェースからこのセッションに再接続することができます。</p></div>
</div>
<div class="sect2">
<h3 id="_現在のセッションを終了するには">現在のセッションを終了するには</h3>
<div class="paragraph"><p>コマンドラインから以下のようにタイプしてみてください。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>kill</tt></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_vimperator_muttatorプラグインとしてインストールしたとき_lt_c_i_gt_インプットフィールドを外部エディタで編集_と_gf_htmlソースを外部ビューワで閲覧_マッピングをフックするには">Vimperator/Muttatorプラグインとしてインストールしたとき、 "&lt;C-i&gt;"(インプットフィールドを外部エディタで編集) と "gF"(HTMLソースを外部ビューワで閲覧) マッピングをフックするには</h3>
<div class="paragraph"><p>インプトッフィールドをtanasinn上の外部エディタで編集したければ、vimperatorrc/muttatorrcに
以下のコマンドを追加してください。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>let g:tanasinneditorcommand="vim %"</tt></pre>
</div></div>
<div class="paragraph"><p>この例ではvimコマンドがシステムにインストールされている必要があります。
「%」の部分はテンポラリファイルのパスに置換されます。</p></div>
<div class="paragraph"><p>HTMLソースをtanasinnで見るには、以下のコマンドを追加します。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>let g:tanasinnviewsourcecommand="vim +e '%'"</tt></pre>
</div></div>
<div class="paragraph"><p>「%」はエスケープ済みのURL文字列に置換されます。
この例ではvimのインストールが必要になります。</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_既知の問題">既知の問題</h2>
<div class="sectionbody">
<div class="ulist"><ul>
<li>
<p>
Windows + Cygwin 環境では起動やエミュレーションが糞遅いです。
</p>
</li>
<li>
<p>
キーボードがSandS(Space and Shift)環境だとspace + space で shift + shift を検出してしまいます。代替手段を用意しなければいけません。
</p>
</li>
<li>
<p>
NIC無効時には動きません。
</p>
</li>
<li>
<p>
開発版につき無駄に何回もloadScriptします。メモリ食いすぎ。
</p>
</li>
<li>
<p>
Python3未対応。Python2系が必要。
</p>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="_拡張モジュール開発">拡張モジュール開発</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_tanasinnにおける_プラグイン">tanasinnにおける「プラグイン」</h3>
<div class="paragraph"><p>tanasinnにおけるプラグインは、必要に応じてロードしたり、すきなときにアンロードできる
ソフトウェア部品、とだけ理解しておけばよいと思います。
tanasinnバージョン0.1.5.4からは、プラグインマネージャが下図のように依存関係を追跡して管理しますので、
プラグインの動的な有効化・無効化がかなり安全に行なえるようになっています。</p></div>
<div class="imageblock">
<div class="content">
<img src="images/pluginview.png" alt="images/pluginview.png" width="780" />
</div>
</div>
</div>
<div class="sect2">
<h3 id="_拡張モジュール開発に向いている人">拡張モジュール開発に向いている人</h3>
<div class="paragraph"><p>以下のような方はぜひ拡張モジュールを書いてみてください。</p></div>
<div class="ulist"><ul>
<li>
<p>
Mozilla環境のCUI/TUI的エンハンスに興味を持たれている方
</p>
</li>
<li>
<p>
TUI環境のGUI的エンハンスやWebとの融合に興味を持たれている方
</p>
</li>
<li>
<p>
端末エミュレーションマニアでVTやTektronixやWyse端末やSixelを実装するのが好きな方
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_拡張モジュール作成_初級編チュートリアル">拡張モジュール作成 初級編チュートリアル</h3>
<div class="literalblock">
<div class="content">
<pre><tt>tanasinnの基礎概念の習得からセッションプラグイン作成まで、なるべく飛ばないように順を追って説明していきます。
注：現在、チュートリアルを書いていて、「この説明だるい、まどろっこしい」と思ったところは思い切ってプログラム
   の方を変更して単純化していますので、サンプルコードがかなりバージョンセンシティブ化しています。
   最新版のtanasinnでお試しください。</tt></pre>
</div></div>
<div class="sect3">
<h4 id="_チュートリアルの方針">チュートリアルの方針</h4>
<div class="literalblock">
<div class="content">
<pre><tt>このチュートリアルでは、簡単なtanasinnプラグインの作成過程を、なるべく平易な形で説明していきたいと思います。
初級編なので、「覚えることを最小限に」をモットーとしたいと思います。
拡張モジュールを書くためにtanasinnコアのソースをいきなり読みはじめるのはおすすめしません。
読むと精神的にやられます。
あのような書き方をせずとも、実はそこそこクリーンなJavascriptコードでプラグインを記述することができます。
記述は少し冗長になりますが総合的にみてずっと生産的です。
本チュートリアルではクリーンで単純なサンプル提示を心掛けます。</tt></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_イベントバスの概念">イベントバスの概念</h4>
<div class="literalblock">
<div class="content">
<pre><tt>チュートリアルに入る前に、これだけはどうしても触れておかなければなりません。「イベントバス」です。
「覚えることを最小限に」をふまえたうえでも、この説明だけはちょっとはずせません。
tanasinnは「tupstart2」と名付けられた結合度的にかなりゆるいタイプのコンポーネントフレームワークを基盤として
構築されており、コンポーネント間のコミュニケーションは基本、同期的なメッセージ指向です。
そのメッセージ(セマンティクス上はイベントだったりコマンドだったりget関数だったりする)は、下図に示されるような
階層化されたバス上を流れています。</tt></pre>
</div></div>
<div class="imageblock ditaa">
<div class="content">
<img src="README-ja__1.png" alt="README-ja__1.png" />
</div>
</div>
<div class="literalblock">
<div class="content">
<pre><tt>階層的に構築されたLANのようなものをイメージしてもらえるといいと思います。
ソフトウェアパターン的には、Observerパターンを階層化したもの、ととらえるとわかりやすいかなと思います。
このような階層において子要素を持つもの、上図においては、Process、Desktop、Sessionのようなものが、イベントを管理しています。
tanasinnハッカー達はこれを「イベントブローカー」、あるいは単に「ブローカー」と呼んでいます。
また逆にこの親要素にぶらさがっているもの、上図においてはProcess以外のノードを、「コンポーネント」と呼んでいます。
名付け方があまり適切でない可能性がありますが、彼らのもつ歴史的背景によりそう呼ばれています。
たとえば上の図でいうと、DesktopとSessionはイベントブローカー兼コンポーネントということになります。
コンポーネント「tty」はSessionというイベントブローカーを介してコンポーネント「screen」にメッセージを送ったりできるわけです。
イベントはUIウィジェットにおけるそれのようにキャプチャリングされたり、バブリングしたりすることはなく、
必要なら明示的にルーティングしてやる必要があります。
またVimperator/KeySnail使い的にはやや戸惑うかと思われますが、ブローカーはその子供(コンポーネント)に対する参照をもちません。
たとえばSessionというオブジェクトから「tty」への参照を明示的にひっぱってくることができません。
ややめんどくさいですがtanasinn全体がこのようなルールで構築されています。</tt></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_準備">準備</h4>
<div class="literalblock">
<div class="content">
<pre><tt>まず、お使いのFirefox/Thunderbird/SeaMonkey等にtanasinnを導入してください。
以下の説明はtanasinn 0.1.5.4以上の環境を想定しているので、tanasinnは最新版を入れておいてください。
$HOME/.tanasinnがすでにある場合、以降の説明がtanasinnの実際の動きと食い違うことがあるかもしれませんので、リネーム等しておくと、はまらなくてよいです。</tt></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_サンプル1_エントリーポイント">サンプル1 - エントリーポイント</h4>
<div class="paragraph"><p>以下のようなサンプルを作成してください。</p></div>
<div class="paragraph"><p>sample1.js</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>function main(broker) {
  coUtils.alert(broker);
}</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>これを、
%USERPROFILE%¥.tanasinn¥modules¥session_components¥ (Windows)
$HOME/.tanasinn/modules/session_components/ (Mac/Linux/FreeBSD)
につっこみます。フォルダ(ディレクトリ)は無いと思うので作成してください。</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>この状態でターミナルセッションを開始してみます。
こうなります。</tt></pre>
</div></div>
<div class="imageblock">
<div class="content">
<img src="images/sample1.png" alt="images/sample1.png" width="500" />
</div>
</div>
<div class="literalblock">
<div class="content">
<pre><tt>ここでもし余裕があればalert関数の中身を変えるなどして、いろいろ実験してみてください。
聡明な方なら以下のことがわかると思います。</tt></pre>
</div></div>
<div class="ulist"><ul>
<li>
<p>
このプラグインモジュールのエントリポイントはmainというシンボルをもつ関数。引数にはSessionオジェクトが与えられている。
</p>
</li>
<li>
<p>
このプラグインモジュールはセッションが開始されるタイミングで読み込み直され、変更等も反映されている。
</p>
</li>
<li>
<p>
このプラグインモジュールのスコープでは、「coUtils」というシンボルが事前定義されている。
</p>
<div class="literalblock">
<div class="content">
<pre><tt>Sessionオブジェクトはセッションバスを管理するブローカーです。
ターミナルウィンドウがひとつ立ち上がるごとに、Sessionオブジェクトが生成されています。</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>coUtilsはtanasinnで使用するユーティリティ関数群をまとめたネームスペースです。
かならずこの中のものを使え、というわけではありません。</tt></pre>
</div></div>
</li>
</ul></div>
</div>
<div class="sect3">
<h4 id="_サンプル2_イベントとトピック">サンプル2 - イベントとトピック</h4>
<div class="literalblock">
<div class="content">
<pre><tt>今度はセッションバス上を飛び交うメッセージを補足し、他のプラグインとコミュニケートしてみます。簡単です。</tt></pre>
</div></div>
<div class="paragraph"><p>sample2.js</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>function main(broker) {
  broker.subscribe("event/before-input", function(message) {
    broker.notify("command/report-overlay-message", "key pressed: '" + message + "'");
  });
}</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>下図のように、キーボードを押すたびにオーバーレイインジケータが出てくると思います。</tt></pre>
</div></div>
<div class="imageblock">
<div class="content">
<img src="images/sample2.png" alt="images/sample2.png" width="700" />
</div>
</div>
<div class="literalblock">
<div class="content">
<pre><tt>これは、「input」というコンポーネントからメッセージを受けとり、プラグイン「Overlay Indicator」にデータを
渡しています。"event/before-input" や "command/report-overlay-message" はイベントソースを識別するた
めの文字列で、「トピック」と呼ばれています。
なお余談ですが、tanasinnでプラグインの振舞いを記述しているとこのようなメッセージパッシングが頻出するため、
特に工夫しない場合たちまちクロージャー地獄に陥ります。
熟練したtanasinnプログラマはトピックと所定の演算子を組み合わせてイベント式を構築し、brokerに対してトリガ条件
を詳細に指定することがあります。たとえばこんなふうに。</tt></pre>
</div></div>
<div class="listingblock">
<div class="content">
<pre><tt>broker.subscribe(
  "@(initialized/{tty &amp; screen} &amp; ~variable-changed/renderer.font_{size|family})",
  function (tty, screen, font_size, font_family) { … })；</tt></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_サンプル3_デバッグ環境をととのえる">サンプル3 - デバッグ環境をととのえる</h4>
<div class="literalblock">
<div class="content">
<pre><tt>つぎのサンプルにとりかかる前に、デバッグ環境を補強しましょう。
コンソールを有効化します。</tt></pre>
</div></div>
<div class="listingblock">
<div class="content">
<pre><tt>enable console
saveprofile</tt></pre>
</div></div>
<div class="imageblock">
<div class="content">
<img src="images/enableconsole.png" alt="images/enableconsole.png" width="500" />
</div>
</div>
<div class="paragraph"><p>起動してみましょう。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>console</tt></pre>
</div></div>
<div class="imageblock">
<div class="content">
<img src="images/console.png" alt="images/console.png" width="770" />
</div>
</div>
<div class="paragraph"><p>すこしコードも書いてみましょう。</p></div>
<div class="paragraph"><p>sample3.js</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>function main(broker)
{
  broker.subscribe("event/before-input", function(message) {
    throw "an error occured !!";
  });
}</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>なにかキーボードを押して"event/before-input"イベントを発生させるたびに、エラーが補足されます。
こうなります。</tt></pre>
</div></div>
<div class="imageblock">
<div class="content">
<img src="images/sample3.png" alt="images/sample3.png" width="770" />
</div>
</div>
<div class="paragraph"><p>さきほどconsoleを有効化しましたが、通常使用時にはパフォーマンスを下げるので無効化しておいたほうが良いです。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>disable console
saveprofile</tt></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_サンプル4_コンポーネントオブジェクトの作成">サンプル4 - コンポーネントオブジェクトの作成</h4>
<div class="literalblock">
<div class="content">
<pre><tt>コンポーネントを作成しましょう。
コンポーネントはプラグインの一歩手前の、プラグアンドプレイをサポートしない原始的なオブジェクトです。
tanasinnの規約によるとコンポーネントの最小要件は、以下のとおりです。</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>.英数字及びアンダースコア(_)、ハイフン(-)、ドット(.)の組み合せで表現されるString型のidをもつ。
.メッセージ "get/components" に対して、自分自身を返す。</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>コードで表現してみましょう。</tt></pre>
</div></div>
<div class="paragraph"><p>sample4.js</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>function main(broker) {
  var plugin = {
    id: "sample"
  };
  broker.subscribe("get/components", function(message) {
    return plugin;
  });
}</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>コンポーネントの登録に相当する部分です。
登録というよりも、コンポーネントいるかーとか、メニューアイテムいるかーとか、バスに対して訊いてみて、
だれかが反応するような感じです。tanasinnではだいたいの事柄がそんなふうに表現されています。
ほとんどがメッセージです。
idやenabledというシグネチャを要求することもあるので部分的にインターフェース指向ですが。</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>今回のサンプルは他のコンポーネントとおしゃべりするための準備だったのですが、このままだと達成感ゼロなので、
最新ビルドにはlscomponentというコマンドを入れておきました。
何もしないコマンドなのですが、補完でコンポーネントを列挙します。
これです。今回作成したsampleが、ちゃんとコンポーネントとして認識されていますね。</tt></pre>
</div></div>
<div class="imageblock">
<div class="content">
<img src="images/sample4.png" alt="images/sample4.png" width="770" />
</div>
</div>
<div class="literalblock">
<div class="content">
<pre><tt>----- つづく。</tt></pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="_拡張モジュール作成_中級編チュートリアル">拡張モジュール作成 中級編チュートリアル</h3>
<div class="paragraph"><p>tanasinnが提供する基礎的なサービスである、coUtils、イベント式、ビルダーテンプレート等の意義を説明し、それらを使用した実践的なプログラミング手法を例示します。これらの概念を覚えてもtanasinnプログラミング以外ではまったく役に立ちません。</p></div>
<div class="literalblock">
<div class="content">
<pre><tt>----- coming soon.</tt></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_拡張モジュール作成_上級編チュートリアル">拡張モジュール作成 上級編チュートリアル</h3>
<div class="paragraph"><p>煮詰められた狂気のオブジェクトシステムtupbaseの制御法を説明します。コアモジュール開発向け。デスクトップ拡張やプロセス拡張、独自端末モード拡張等についてもここで触れます。</p></div>
<div class="literalblock">
<div class="content">
<pre><tt>----- coming soon.</tt></pre>
</div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_developing_materials">Developing materials</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_hierarchical_event_broker_pattern">Hierarchical event broker pattern</h3>
<div class="imageblock ditaa">
<div class="content">
<img src="README-ja__2.png" alt="README-ja__2.png" />
</div>
</div>
</div>
<div class="sect2">
<h3 id="_event_bus">Event bus</h3>
<div class="imageblock ditaa">
<div class="content">
<img src="README-ja__3.png" alt="README-ja__3.png" />
</div>
</div>
</div>
<div class="sect2">
<h3 id="_object_system">Object system</h3>
<div class="literalblock">
<div class="content">
<pre><tt>Coming soon.</tt></pre>
</div></div>
<div class="sect3">
<h4 id="_class">Class</h4>
</div>
<div class="sect3">
<h4 id="_processing_decorated_annotated_member_name">Processing decorated (annotated) member name</h4>
</div>
<div class="sect3">
<h4 id="_attributes">Attributes</h4>
<div class="sect4">
<h5 id="_serializeable">serializeable</h5>
</div>
<div class="sect4">
<h5 id="_watchable">watchable</h5>
</div>
<div class="sect4">
<h5 id="_listen">listen</h5>
</div>
<div class="sect4">
<h5 id="_subscribe">subscribe</h5>
</div>
<div class="sect4">
<h5 id="_sequence">sequence</h5>
</div>
<div class="sect4">
<h5 id="_command">command</h5>
</div>
<div class="sect4">
<h5 id="_nmap">nmap</h5>
</div>
<div class="sect4">
<h5 id="_cmap">cmap</h5>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_process_js_plug_and_play_dynamic_module_loading">process.js / Plug-and-play dynamic module loading</h3>
<div class="literalblock">
<div class="content">
<pre><tt>Coming soon.</tt></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_event_js_event_system">event.js / Event system</h3>
<div class="paragraph"><p>Defines class EventBroker, which is able to interpret and evaluate
"Topic" and "Event Expression".</p></div>
<div class="sect3">
<h4 id="_topic_overview">"Topic" Overview</h4>
<div class="literalblock">
<div class="content">
<pre><tt>In this event system, registered events is concerned by "topic" that
is string variable consists of some digits and alphabets.</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>If you registered an event as follows:</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>var id = broker.subscribe(&lt;topic&gt;, &lt;handler&gt;, ....);</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>This event handler could be fired as following code:</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>broker.notify(&lt;topic&gt;);</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>The subscribe method returns an ID string.
When you want to unregister handler, use it as follows:</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>broker.unsubscribe(id);</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>NOTE that this ID is NOT corresponds to a handler, one-to-one.
The relation between Topic-ID is as same as that, because this event
system is based on the concept of multicast delegate system.</tt></pre>
</div></div>
<div class="imageblock ditaa">
<div class="content">
<img src="README-ja__4.png" alt="README-ja__4.png" />
</div>
</div>
</div>
<div class="sect3">
<h4 id="_event_expression_overview">"Event Expression" Overview</h4>
<div class="literalblock">
<div class="content">
<pre><tt>Event Expression indicates how the broker waits multiple events.
It was given to subscriber method, that called such as:</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>broker.subscribe(&lt;expression&gt;, ....);</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>&lt;expression&gt; consists of 1 or multiple event topics and other tokens,
that ruled by simple grammar. the detail of it is as below...</tt></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_grammer_of_event_expression">Grammer of Event Expression</h4>
<div class="listingblock">
<div class="content">
<pre><tt>   IdentifierCharacter := '_' | '-' | digit | alphabet

   NormalToken := IdentifierCharacter, IdentifierCharacter*

   GlobToken := '{', NormalToken, '}'
              | '{', NormalToken, '}', NormalToken
              | NormalToken, '{', NormalToken, '}'
              | NormalToken, '{', NormalToken, '}', NormalToken

   GlobToken := NormalToken | GlobToken

   PrimaryExpression := Token | '(', Expression, ')'

   UnaryOperator := '@' | '~'

   UnaryExpression := PrimaryExpression | UnaryOperator, PrimaryExpression

   BinaryOperator := 'and' | 'or' | '&amp;' | '|'

   BinaryExpression := UnaryExpression | UnaryExpression, BinaryOperator, UnaryExpression

   Expression := BinaryExpression</tt></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_event_expression_example">Event Expression Example</h4>
<div class="ulist"><ul>
<li>
<p>
case 1.
</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content">
<pre><tt>     "A"</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>-&gt; it triggered when the event "A" is signaled.</tt></pre>
</div></div>
<div class="ulist"><ul>
<li>
<p>
case 2.
</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content">
<pre><tt>     "A | B"</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>-&gt; wait for multiple events "A" OR "B".
   it is triggered when one of either events is signaled.</tt></pre>
</div></div>
<div class="ulist"><ul>
<li>
<p>
case 3.
</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content">
<pre><tt>     "A &amp; B"</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>-&gt; wait for both events "A" AND "B"
   it is triggered when both of these events is signaled.</tt></pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="_ttydriver_py_tty_driver">ttydriver.py / TTY Driver</h3>
<div class="sect3">
<h4 id="_module_overview">Module Overview</h4>
<div class="paragraph"><p>This module is assumed to be called by tanasinn&#8217;s "tty.js".
First, tanasinn opens TCP channel and listen on 2 ports, [I/O channel] and
[Control channel].
Next, tanasinn should call this script, with 2 arguments that is represent
above-mentioned 2 channel&#8217;s port numbers.
Then, A TeletypeDriver object is instantiate. it connect these channels and
establish TCP connection, and finally forks new 4 processes as follows:</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
Application Process
   This is user-specified application process, launched by command such as
   the following.
</p>
</li>
</ol></div>
<div class="listingblock">
<div class="content">
<pre><tt>      /bin/sh -c 'exec &lt;startcommand&gt;'</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>&lt;startcommand&gt; is asked for tanasinn through the &lt;Control channel&gt;.</tt></pre>
</div></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
Writing Process
   This process wait to receive data from tanasinn through &lt;I/O channel&gt;,
   which is user&#8217;s input key sequence in many cases.
   As receiving data, the Process passes it to TTY master device as it is.
</p>
</li>
<li>
<p>
Reading Process
   This process wait to receive data from TTY master device, which is output
   sequence from application program in many cases.
   As receiving data, the Process passes it to tanasinn through [I/O channel].
</p>
</li>
<li>
<p>
Controlling Process
   This process communicate with tanasinn through [Control channel] in
   simple, lightweight, 7bit ascii-based protocol.
</p>
</li>
</ol></div>
<div class="imageblock ditaa">
<div class="content">
<img src="README-ja__5.png" alt="README-ja__5.png" />
</div>
</div>
<div class="literalblock">
<div class="content">
<pre><tt>figure-1. Communication among TTY device pair, TeletypeDriver, tanasinn.</tt></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_about_control_channel_s_protocol">About [Control channel]'s protocol</h4>
<div class="sect4">
<h5 id="_protocol_overview">Protocol Overview</h5>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
This protocol is line-oriented. line terminator is <em>\n</em> (0x0a).
</p>
</li>
<li>
<p>
This protocol is command-based. 1 line should be interpreted as 1
       command.
       A command is composed of 1 or multiple tokens. delimiter character is
       ' ' (0x20).
</p>
</li>
<li>
<p>
First token is <strong><span class="bold">opecode</span></strong>, represent a operation.
       An <strong><span class="bold">opecode</span></strong> consists of lower-case alphabetic sets ([a-z]+).
</p>
</li>
<li>
<p>
Tokens after <strong><span class="bold">opecode</span></strong> represent arguments.
       An arguments consists of multiple printable characters, that is
       encoded in base64 Data Encoding, defined in RFC-3548.
</p>
</li>
</ol></div>
<div class="listingblock">
<div class="content">
<pre><tt>       example 1:
         xoff\n</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>Opecode of this command is "xoff". "\n" is line terminator.</tt></pre>
</div></div>
<div class="listingblock">
<div class="content">
<pre><tt>       example 2:
         resize ODA= MjQ=\n</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>In this case, [bold]*opecode* is "resize".
Arguments are "ODA=" and "MjQ=", these strings mean "80" and "24"
when decoded.</tt></pre>
</div></div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_builder_js_xul_dynamic_construction">builder.js / XUL dynamic construction</h3>
<div class="paragraph"><p>Accept UI-template object and convert it to a tree of DOM element.</p></div>
<div class="sect3">
<h4 id="_ui_template_overview">UI-template overview</h4>
<div class="literalblock">
<div class="content">
<pre><tt>UI-template is JSON-style object that is described as based on the
specific rule.
It is to be converted to a node set of XUL/HTML/SVG elements by
"Template Builder" object.</tt></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_examples">Examples</h4>
<div class="paragraph"><p>Example 1:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>   ({                          // &lt;--- (1)
     tagName: "box",           // &lt;--- (2)
     flex: 1,
     style: {                  // &lt;--- (3)
       backgroundColor: "red"  // &lt;--- (4)
     }
   })</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>It will be converted to following XUL element.</tt></pre>
</div></div>
<div class="listingblock">
<div class="content">
<pre><tt>     &lt;box flex="1" style="background-color: red;"/&gt;</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>Every UI-template object consists of &lt;Element node&gt; (1), and it is
typically a tree set of &lt;Element node&gt;s.
It always includes "tagName" property (2), and often includes
&lt;Style node&gt; (3).
&lt;Style node&gt; may have some CSS properties in camel-case (4).</tt></pre>
</div></div>
<div class="paragraph"><p>Example 2:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>   ({
     tagName: "html:div",
     parentNode: "id-of-parent", // &lt;--- (5)
     style: {
       textAlign: "center"
     }
     childNodes: {               // &lt;--- (6)
       tagName: "html:div",
       style: {
         fontSize: "1.5em"
       },
       childNodes: [             // &lt;--- (7)
         {
           tagName: "html:span",
           innerText: "abcde"    // &lt;--- (8)
         },
         {
           tagName: "html:div",
         }
       ]
     }
   })</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>It will be converted as below.</tt></pre>
</div></div>
<div class="listingblock">
<div class="content">
<pre><tt>   &lt;html:div style="text-align: center;"&gt;
     &lt;html:div style="font-size: 1.5em;"&gt;
       &lt;html:span&gt;abcde&lt;/html:span&gt;
       &lt;html:div/&gt;
     &lt;/html:span&gt;
   &lt;/html:div&gt;</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>The "parentNode" property (5) indicates at which the current node is to
be set. if the type of property value was "string", it regards as node
ID of the parent node. or if its type is "object", especially
HTMLElement, it regards as the parent node object itself.
The "childNodes" property has an effect which cascades down
following &lt;Element node&gt; (6). If you wanted to create two or more
child nodes under the same node, you should substitute an Array of
&lt;Element node&gt;s (7) in "childNodes" property.
The "innerText" property (8) creates a text node under current
&lt;Element node&gt;.</tt></pre>
</div></div>
<div class="paragraph"><p>Example 2:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>   ({
     tagName: "hbox",
     id: "parent",
     flex: 1,
     onconstruct: {              // &lt;--- (9)
       handler: function() { window.alert(this.id); }
     },
     childNodes: [
       {
         tagName: "vbox",
         id: "left",
         flex: 1,
         listener: {             // &lt;--- (10)
           type: "mouseover",
           context: window,
           handler: onMouseOver
         }
       },
       {
         tagName: "vbox",
         id: "right",
         flex: 1,
         listener: [
           {
             type: "mouseup",
             handler: onMouseUp
           },
           {
             type: "mousedown",
             handler: onMouseDown
           }
         ]
       }
     ]
   })</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>It almost corresponds to following XUL code.</tt></pre>
</div></div>
<div class="listingblock">
<div class="content">
<pre><tt>   &lt;hbox id="parent" flex="1"&gt;
     &lt;vbox id="left" flex="1" onmouseover=""/&gt;
     &lt;vbox id="right" flex="1"/&gt;
   &lt;/hbox&gt;
   &lt;script type="application/x-javascript"/&gt;
     &lt;![CDATA[
       var parent = document.getElementById("parent");
       var left = document.getElementById("left");
       var right = document.getElementById("right");
       (function() window.alert(this.id)).apply(parent);
       left.addEventListener("mouseover", function() {
         onMouseOver.apply(window, arguments);
       }, false);
       right.addEventListener("mouseup", onMouseUp, false);
       right.addEventListener("mousedown", onMouseOver, false);
     ]]&gt;
   &lt;/script&gt;</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>The "onconstruct" property (9) defines a event function which fired
when the property itself is parsed.
The "listener" property (10) attaches a event handler at the current
&lt;Element node&gt;.</tt></pre>
</div></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_バグレポート_パッチ">バグレポート・パッチ</h2>
<div class="sectionbody">
<div class="paragraph"><div class="title">バグレポート・パッチ超歓迎。</div><p>saitoha &lt;<a href="mailto:user@zuse.jp">user@zuse.jp</a>&gt;
twitter: <a href="http://twitter.com/kefir_">日本語</a> / <a href="http://twitter.com/feel_tanasinn">英語</a></p></div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated 2012-02-13 18:41:30 JST
</div>
</div>
</body>
</html>
