<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.6" />
<title>tanasinn terminal emulator</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

pre {
  padding: 0;
  margin: 0;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #777777;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }


/*
 * xhtml11 specific
 *
 * */

tt {
  font-family: monospace;
  font-size: inherit;
  color: navy;
}

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

.monospaced {
  font-family: monospace;
  font-size: inherit;
  color: navy;
}

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


/*
 * Theme specific overrides of the preceding (asciidoc.css) CSS.
 *
 */
body {
  font-family: Garamond, Georgia, serif;
  font-size: 17px;
  color: #3E4349;
  line-height: 1.3em;
}
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Garmond, Georgia, serif;
  font-weight: normal;
  border-bottom-width: 0;
  color: #3E4349;
}
div.title, caption.title { color: #596673; font-weight: bold; }
h1 { font-size: 240%; }
h2 { font-size: 180%; }
h3 { font-size: 150%; }
h4 { font-size: 130%; }
h5 { font-size: 115%; }
h6 { font-size: 100%; }
#header h1 { margin-top: 0; }
#toc {
  color: #444444;
  line-height: 1.5;
  padding-top: 1.5em;
}
#toctitle {
  font-size: 20px;
}
#toc a {
    border-bottom: 1px dotted #999999;
    color: #444444 !important;
    text-decoration: none !important;
}
#toc a:hover {
    border-bottom: 1px solid #6D4100;
    color: #6D4100 !important;
    text-decoration: none !important;
}
div.toclevel1 { margin-top: 0.2em; font-size: 16px; }
div.toclevel2 { margin-top: 0.15em; font-size: 14px; }
em, dt, td.hdlist1 { color: black; }
strong { color: #3E4349; }
a { color: #004B6B; text-decoration: none; border-bottom: 1px dotted #004B6B; }
a:visited { color: #615FA0; border-bottom: 1px dotted #615FA0; }
a:hover { color: #6D4100; border-bottom: 1px solid #6D4100; }
div.tableblock > table, table.tableblock { border: 3px solid #E8E8E8; }
th.tableblock, td.tableblock { border: 1px solid #E8E8E8; }
ul > li > * { color: #3E4349; }
pre, tt, .monospaced { font-family: Consolas,Menlo,'Deja Vu Sans Mono','Bitstream Vera Sans Mono',monospace; }
tt, .monospaced { font-size: 0.9em; color: black;
}
div.exampleblock > div.content, div.sidebarblock > div.content, div.listingblock > div.content { border-width: 0 0 0 3px; border-color: #E8E8E8; }
div.verseblock { border-left-width: 0; margin-left: 3em; }
div.quoteblock { border-left-width: 3px; margin-left: 0; margin-right: 0;}
div.admonitionblock td.content { border-left: 3px solid #E8E8E8; }
@media screen {
  body {
    max-width: 50em; /* approximately 80 characters wide */
    margin-left: 16em;
  }

  #toc {
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    width: 13em;
    padding: 0.5em;
    padding-bottom: 1.5em;
    margin: 0;
    overflow: auto;
    border-right: 3px solid #f8f8f8;
    background-color: white;
  }

  #toc .toclevel1 {
    margin-top: 0.5em;
  }

  #toc .toclevel2 {
    margin-top: 0.25em;
    display: list-item;
    color: #aaaaaa;
  }

  #toctitle {
    margin-top: 0.5em;
  }
}
</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([2-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install(2);
/*]]>*/
</script>
</head>
<body class="article">
<div id="header">
<h1>tanasinn terminal emulator</h1>
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph"><p><a href="./usermanual.html">English/英語</a></p></div>
</div>
</div>
<div class="sect1">
<h2 id="_概要">1. 概要</h2>
<div class="sectionbody">
<div class="literalblock">
<div class="content">
<pre><tt>"tanasinn terminal emulator" は Firefox/Thunderbird/SeaMonkey上で動作する端末エミュレータです。
Windows(XP/Vista/7) + Cygwin / Mac / Linux / FreeBSD 環境で動作します。</tt></pre>
</div></div>
</div>
</div>
<div class="sect1">
<h2 id="_news">2. News</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_2012_05_23">2.1. 2012/05/23</h3>
<div class="literalblock">
<div class="content">
<pre><tt>Version 0.2.2.0
Supports OSC 52 base64 copy.
Supports DEC Locator Event Mode(without filter rectangle feature).
Supports character combining, more precise character rendering.
Implement LNM.
Implement Device Status Report(DSR).
Implement Tertiary Device Attributes (DA3).
Implement DECREQTPARM.
More precise emulation, Now it passes vttest Menu 1, 2, 3, 4, 6, 7, and 8.
Disable ShellRPC plugin.</tt></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_2012_05_05">2.2. 2012/05/05</h3>
<div class="literalblock">
<div class="content">
<pre><tt>Version 0.2.1.1
Supports inline Sixel Graphics.
Supports UTF8/urxvt/SGR style mouse reporting.
Improve performance.</tt></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_2012_04_18">2.3. 2012/04/18</h3>
<div class="literalblock">
<div class="content">
<pre><tt>Version 0.2.0.0
More precise emulation.
Now it passes vttest 1, 2, 3, 4, 7, and 8.
Improve performance.</tt></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_2012_04_15">2.4. 2012/04/15</h3>
<div class="literalblock">
<div class="content">
<pre><tt>Version 0.1.7.2
Important bug fix, Now it works en_US locale, sorry!</tt></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_2012_04_08">2.5. 2012/04/08</h3>
<div class="literalblock">
<div class="content">
<pre><tt>Now version 0.1.7.1 available.</tt></pre>
</div></div>
<div class="ulist"><ul>
<li>
<p>
Implement SGR blink feature.
</p>
</li>
<li>
<p>
Implement SGR rapid blink feature(from DOS&#8217;s ANSI.SYS).
</p>
</li>
<li>
<p>
Implement SGR italic feature.
</p>
</li>
<li>
<p>
Implement SGR halfbright feature.
</p>
<div class="literalblock">
<div class="content">
<pre><tt>重要：0.1.5.0 / 0.1.5.1はビルド時のバグのため「動きません」。
        0.1.5.2は一部のプラットフォームで動きません。
        いろいろ試行錯誤しちゃった人はすみません。</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>Python2.x系のパスやCygwinのルートディレクトリなどを探しまわり、環境情報を推定しようとします。</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>動かなかった場合は %USERPROFILE%¥.tanasinn.js (Windows)、または~/.tanasinn.js(それ以外のOS) に、
このように書いてみてください。</tt></pre>
</div></div>
</li>
</ul></div>
<div class="listingblock">
<div class="title">%USERPROFILE%¥.tanasinn.js or $HOME/.tanasinn.js</div>
<div class="content">
<pre><tt>process.cygwin_root = "C:\\cygwin";
process.bin_path = "/bin:/usr/bin:/usr/local/bin:/opt/local/bin";
process.python_path = "/usr/bin/python"</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>それでもだめな環境もあるかもしれません。
こちらからはtwitter用ハッシュタグ #tanasinn / #tanasinnが動かない あたりで探してみます。</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>拡張フォルダ内のディレクトリ名が歴史的理由により意味不明になっていたので、かなり変えました。</tt></pre>
</div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ダウンロード_ライセンス">3. ダウンロード/ライセンス</h2>
<div class="sectionbody">
<div class="paragraph"><p><a href="http://www.mozilla-japan.org/MPL/MPL-1.1J.html">Mozilla Public License 1.1 (MPL1.1)</a> で配布しています。</p></div>
<div class="ulist"><ul>
<li>
<p>
"develop"ブランチ版(XPI): <a href="https://github.com/saitoha/tanasinn/raw/develop/download/tanasinn@zuse.jp.xpi">ダウンロード</a>
</p>
</li>
<li>
<p>
"master"ブランチ版(XPI): <a href="https://github.com/saitoha/tanasinn/raw/master/download/tanasinn@zuse.jp.xpi">ダウンロード</a>
</p>
</li>
<li>
<p>
過去のバージョン: <a href="https://github.com/saitoha/tanasinn/tree/master/download/releases">ダウンロード</a>
</p>
</li>
<li>
<p>
github: <a href="https://github.com/saitoha/tanasinn">https://github.com/saitoha/tanasinn</a>
</p>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="_特色">4. 特色</h2>
<div class="sectionbody">
<div class="ulist"><ul>
<li>
<p>
Geckoベースのユーザーインターフェース (HTML Canvas + XUL)。柔軟でカスタマイズが容易です。
</p>
</li>
<li>
<p>
マルチプラットフォーム。現在サポートされるのは、Mac / FreeBSD / Linux(というかUbuntu) /
      Windows(XP/Vista/7) + <a href="http://www.cygwin.com">Cygwin</a>環境 (POSIX版Pythonが必要)
</p>
</li>
<li>
<p>
プラグインアーキテクチャ。プラグアンドプレイでのインストール・アンインストールが可能。
</p>
</li>
<li>
<p>
ブラウザを再起動したり閉じたりしている間、ターミナルセッションを保持します。
      サスペンドしたセッションに後から再接続できます。
</p>
</li>
<li>
<p>
デバッガ内臓。ステップ実行やトレースができます。
      ターミナルとアプリケーションがやり取りするI/Oシーケンスをリアルタイムで観察できます。
</p>
</li>
<li>
<p>
高品質なエミュレーション。vttestメニュー 1, 2, 3, 4, 6, 7, 8 のテストをパスしています。
</p>
</li>
<li>
<p>
スクロールバック、代替スクリーン、ビジュアルベル、オーディオベルなど基本的な機能はサポートしています。
</p>
</li>
<li>
<p>
IMEが使えます。
</p>
</li>
<li>
<p>
VT52互換モード搭載。
</p>
</li>
<li>
<p>
<a href="http://en.wikipedia.org/wiki/Tektronix_4010">Tektronix 4010/4014</a>互換モード搭載 (一部未実装)。
</p>
</li>
<li>
<p>
Sixelグラフィクスモードをサポート。
</p>
</li>
<li>
<p>
イタリック・ブリンク・低速ブリンク・アンダーライン・反転などのさまざまなキャラクタアトリビュートを実装
</p>
</li>
<li>
<p>
PC端末では実装例の少ないロスト・コマンドを積極的に実装。
      DECDHL/DECDWLや<a href="http://vt100.net/dec/vt320/soft_characters">DRCS(Dynamically Redefined Character Set)</a>など。
</p>
</li>
<li>
<p>
East Asian Width(ひらがななどの文字幅を考慮したレンダリング)に一応対応しています。
      B集合以降のCJK統合拡張漢字等、サロゲートペアで表現される文字にも対応しています。
      異体字セレクタ、インド系諸語等で頻出する合字やアラビア系文字の置換などの複雑なグリフ処理は、
      現在主にパフォーマンス上の理由により実装されませんが、 別途プラグインで対応することも可能です。
      bidiには完全に対応できていないと思います。
</p>
</li>
<li>
<p>
地域化のサポート。gettextのようなスタイルを採用しています。
      ローカライズリソースをUI上から編集することができます。
</p>
</li>
<li>
<p>
Geckoがサポートする様々なエンコーディングを指定できます。
</p>
</li>
<li>
<p>
ウィンドウの透明化をサポート。これはブラウジングしながらターミナルで作業したい時に便利です。
</p>
</li>
<li>
<p>
マウスエミュレーションをサポート。xtermスタイルのノーマルレポーティング、ホイールスクロール、
      UTF8/urxvt/SGRスタイルの拡張レポーティングのほか、DEC Locator Eventsにも一部対応。
</p>
</li>
<li>
<p>
テキストの選択や矩形選択ができます。
</p>
</li>
<li>
<p>
ドラッグアンドドロップやキーボードショートカットによる選択テキストのコピー・ペーストが可能です。
</p>
</li>
<li>
<p>
ドラッグによる移動・リサイズができます。
</p>
</li>
<li>
<p>
256色表示対応。32bitカラーをパレットに割り当てることができます。
</p>
</li>
<li>
<p>
VimperatorやKeysnailのようなコマンドラインインターフェース。
</p>
</li>
<li>
<p>
Vimperator/Muttator のプラグインとして導入することができます。必要なら"&lt;C-i&gt;"や"gF"マッピングをフックすることができます。
</p>
</li>
<li>
<p>
一部のプラットフォームでトラックパッドジェスチャー対応。
      ピンチオープン・クローズ、スワイプ、回転を別のキーイベントにマップすることが可能。
</p>
</li>
<li>
<p>
スタンドアロンのXULアプリケーションとして動作させることも頑張れば可能。
</p>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="_スクリーンショット">5. スクリーンショット</h2>
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="images/nyan.png" alt="images/nyan.png" width="780" />
</div>
<div class="title">Figure 1. "<a href="http://miku.acm.uiuc.edu">Nyan Cat</a>"を走らせたところ。</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/bb2.png" alt="images/bb2.png" width="780" />
</div>
<div class="title">Figure 2. "<a href="http://w3m.sourceforge.net/index.en.html">BB</a>"(アスキーアートのデモプログラム)を走らせたところ。</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/color2.png" alt="images/color2.png" width="780" />
</div>
<div class="title">Figure 3. <a href="http://code.google.com/p/myminios/source/browse/trunk/colortable16.sh?r=10">colortable.sh</a> and <a href="http://code.google.com/p/joeldotfiles/source/browse/trunk/256colors2.pl">256color2.pl</a>でカラーチャートを表示させたところ。</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/ime2.png" alt="images/ime2.png" width="780" />
</div>
<div class="title">Figure 4. IMEで日本語を打ってみたところ (<a href="http://aquaskk.sourceforge.jp/">AquaSKK</a>使用)。</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/scroll2.png" alt="images/scroll2.png" width="780" />
</div>
<div class="title">Figure 5. スクロールバーインターフェースは必要なときにあらわれます(OSX Lionのように)。</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/overlay2.png" alt="images/overlay2.png" width="780" />
</div>
<div class="title">Figure 6. オーバーレイインジケータがフォントサイズ、ウィンドウサイズ、タイトルバーメッセージが変更されたときなどに表示されます。</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/completion2.png" alt="images/completion2.png" width="780" />
</div>
<div class="title">Figure 7. <a href="http://vimperator.org/vimperator">Vimperator</a> や <a href="https://github.com/mooz/keysnail/wiki/">Keysnail</a> にインスパイアされたコマンドラインインターフェース。</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/fontfamily2.png" alt="images/fontfamily2.png" width="780" />
</div>
<div class="title">Figure 8. フォントファミリを選択しています。</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/fontsize2.png" alt="images/fontsize2.png" width="780" />
</div>
<div class="title">Figure 9. フォントサイズを選択しています。</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/launcher2.png" alt="images/launcher2.png" width="780" />
</div>
<div class="title">Figure 10. <a href="http://www.blacktree.com/">QuckSilver</a> や <a href="https://addons.mozilla.org/ja/firefox/addon/mozilla-labs-ubiquity/">Ubiquity</a> にインスパイアされたランチャーインターフェース。</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/session2.png" alt="images/session2.png" width="780" />
</div>
<div class="title">Figure 11. デタッチ済みのセッションに再接続しているところ。ブラウザがクラッシュしたり再起動しても安心です。</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/sl2.png" alt="images/sl2.png" width="780" />
</div>
<div class="title">Figure 12. "<a href="http://www.tkl.iis.u-tokyo.ac.jp/~toyoda/index_e.html">sl</a>" (ジョークウェア)を走らせたところ。</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/debug2.png" alt="images/debug2.png" width="780" />
</div>
<div class="title">Figure 13. セルフデバッギング。ターミナルI/Oシーケンスをリアルタイムにトレースしています。</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/vim.png" alt="images/vim.png" width="780" />
</div>
<div class="title">Figure 14. ポップアップメニューを表示しています。<a href="http://www.vim.org">Vim</a>の方をちょっと改造しました。</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/w3m2.png" alt="images/w3m2.png" width="780" />
</div>
<div class="title">Figure 15. ブラウザの中でブラウザ。プライベートパッチを当てた<a href="http://w3m.sourceforge.net/index.en.html">w3m</a>でインラインイメージを表示させました。ここまでくるとちょっと意味不明ですね。</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wl3.png" alt="images/wl3.png" width="780" />
</div>
<div class="title">Figure 16. メーラーの中でメーラー。<a href="http://www.gohome.org/wl/index.html">Wonderlust</a>をemacs上で動かしているものをThunderbird上で動かしています。</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/xulapp.png" alt="images/xulapp.png" width="780" />
</div>
<div class="title">Figure 17. tanasinnをtanasinnでメタ開発中。これはスタンドアロンXULアプリケーションとして動作させているところです。</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/roflbalt.png" alt="images/roflbalt.png" width="780" />
</div>
<div class="title">Figure 18. https:</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/zsh.png" alt="images/zsh.png" width="780" />
</div>
<div class="title">Figure 19. zshのcorrect機能にプライベートシーケンスを仕込みました。シーケンスハンドラの応用例です。</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tektronix.png" alt="images/tektronix.png" width="780" />
</div>
<div class="title">Figure 20. <a href="http://en.wikipedia.org/wiki/Tektronix_4010">Tektronix 4010/4014</a> エミュレーション。</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/sixel.png" alt="images/sixel.png" width="780" />
</div>
<div class="title">Figure 21. <a href="https://en.wikipedia.org/wiki/Sixel">Sixel Graphics</a> エミュレーション。</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/decdhl.png" alt="images/decdhl.png" width="780" />
</div>
<div class="title">Figure 22. DECDHL/DECDWL。</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/drcs.png" alt="images/drcs.png" width="780" />
</div>
<div class="title">Figure 23. DECDHLおよびDECDLD/<a href="http://vt100.net/dec/vt320/soft_characters">DRCS(Dynamically Redefined Character Set)</a>のあわせ技でGuiness。</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/nethack.png" alt="images/nethack.png" width="780" />
</div>
<div class="title">Figure 24. jnethackで遊んでいるところ。</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/shellshock.png" alt="images/shellshock.png" width="780" />
</div>
<div class="title">Figure 25. <a href="http://blog.dhampir.no/content/shellshock-a-bash-3-bash-4-spaceshooter">ShellShock</a>で遊んでいるところ。</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/mplayer.png" alt="images/mplayer.png" width="780" />
</div>
<div class="title">Figure 26. <a href="http://www.mplayerhq.hu/design7/news.html">mplayer</a>で動画を再生したところ。</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_将来的にサポートされる仕様">6. 将来的にサポートされる仕様</h2>
<div class="sectionbody">
<div class="ulist"><ul>
<li>
<p>
エミュレーションの強化。今はとりあえずxterm系コンパチブルなエミュレーションで作ってますが、
      本来はterminfoエントリを見るべきでしょう。
</p>
</li>
<li>
<p>
カラースキーマのサポート。16色or256色のパレットをインポート/エクスポートできるように。
</p>
</li>
<li>
<p>
スキンのサポート。痛端末化が可能に。
</p>
</li>
<li>
<p>
cursesベースのアプリーションとの連携強化。
      端末アプリケーションからGeckoにアクセスしてポップアップとか動画表示とかOAuthとかやるための仕様の策定。
      特別なプラグインを書かずとも端末からyoutubeを見たりtwitterやったりできるようになります。
</p>
</li>
<li>
<p>
プラグイン開発用ドキュメント。
</p>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="_動作要件">7. 動作要件</h2>
<div class="sectionbody">
<div class="ulist"><ul>
<li>
<p>
Firefox 4.02pre+ / Thunderbird 7.0a1+ / SeaMonkey 2.1+.
</p>
</li>
<li>
<p>
POSIX用にビルドされたPython (2.5+, Mac、FreeBSD、Linux、 または cygwin用のもの)。
      Python for Win32 や ActivePython 等はforkや仮想端末をサポートしないと思うのでダメしょう。
</p>
</li>
<li>
<p>
POSIX環境。
      もしWindowsをお使いでしたら、C:\cygwinにCygwinをインストールしてください。
</p>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="_インストール">8. インストール</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_firefox_thunderbird_seamonkey拡張としてビルドする">8.1. Firefox/Thunderbird/SeaMonkey拡張としてビルドする:</h3>
<div class="listingblock">
<div class="title">Mac, FreeBSD, Linux, Cygwin</div>
<div class="content">
<pre><tt>git clone git://zuse.jp/git/tanasinn.git
cd tanasinn
./configure
make</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>ビルドが成功すると、tanasinn@zuse.jpというXPIファイルが生成されます。
これをインストールしてください。</tt></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_vimperator_muttatorプラグインとしてインストール">8.2. Vimperator/Muttatorプラグインとしてインストール:</h3>
<div class="literalblock">
<div class="content">
<pre><tt>Vimperator/Muttatorのランタイムディレクトリ以下にリンクを作成します。</tt></pre>
</div></div>
<div class="listingblock">
<div class="title">Mac, FreeBSD, Linux</div>
<div class="content">
<pre><tt>git clone git://zuse.jp/git/tanasinn.git
cd tanasinn
ln -s $PWD $RUNTIME/tanasinn
ln $PWD/modules/tanasinn-vimp.js $RUNTIME/plugin/</tt></pre>
</div></div>
<div class="listingblock">
<div class="title">Windows Vista/7 + Cygwin</div>
<div class="content">
<pre><tt>git clone git://zuse.jp/git/tanasinn.git
cd tanasinn
$(cygpath $COMSPEC) /c mklink /D "$(cygpath -w "$RUNTIME/tanasinn")" "$(cygpath -w "$PWD")";
ln $PWD/modules/tanasinn-vimp.js $RUNTIME/plugin/</tt></pre>
</div></div>
<div class="paragraph"><div class="title">Windows XP + Cygwin</div><p>Windowsネイティブなシンボリックリンクを作成するために、<a href="http://www.microsoft.com/download/en/details.aspx?DisplayLang=en%2cen&amp;id=17657">Windows Server 2003 Resource Kit Tools</a> をインストールする必要があるかもしれません。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>git clone git://zuse.jp/git/tanasinn.git
cd tanasinn
$(cygpath $COMSPEC) /c linkd.exe "$(cygpath -w "$RUNTIME/tanasinn")" "$(cygpath -w "$PWD")";
ln $PWD/modules/tanasinn-vimp.js $RUNTIME/plugin/</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>$RUNTIMEは'$HOME/.{vimperator,muttator}'のようなVimperator/Muttatorのランタイムディレクトリです。</tt></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_keysnail経由でインストール">8.3. KeySnail経由でインストール:</h3>
<div class="listingblock">
<div class="title">keysnail.js</div>
<div class="content">
<pre><tt>............

void function install_tanasinn() {

    var file = "file:///…………/tanasinn/modules/common/process.js";

    var contractID = "@zuse.jp/tanasinn/process;1";
    var process_class = Components.classes[contractID]
    if (!process_class) {
        Components.classes["@mozilla.org/moz/jssubscript-loader;1"]
            .getService(Components.interfaces.mozIJSSubScriptLoader)
            .loadSubScript(file);
        process_class = Components.classes[contractID]
    }
    var process = process_class
        .getService(Components.interfaces.nsISupports)
        .wrappedJSObject;

    shell.add(["tanasinnlaunch","tla[unch]"],
              "Show tanasinn's Launcher.",
              function () {
                  process.getDesktopFromWindow(window)
                      .post("command/show-launcher");
              }, {
                argcount: "0",
                bang: true
              });

    shell.add(["tanasinnstart","tst[art]"],
              "Run a command on tanasinn.",
              function (args, extra) {
                  process.getDesktopFromWindow(window)
                      .post("command/start-session", extra.left);
              }, {
                argcount: "?",
                bang: true
              });
} ();

............</tt></pre>
</div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_使いかた">9. 使いかた</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_端末の起動">9.1. 端末の起動</h3>
<div class="imageblock">
<div class="content">
<img src="images/launcher.png" alt="images/launcher.png" width="480" />
</div>
</div>
<div class="sect3">
<h4 id="_拡張としてインストールした場合">9.1.1. 拡張としてインストールした場合</h4>
<div class="literalblock">
<div class="content">
<pre><tt>Controlキーの2度押し (ctrl + ctrl) でコマンドラインランチャーインターフェースが出現します。
そこで例えば、"man man[Enterキー]" とタイプしてみてください。
ウィンドウのようなUIがブラウザウィンドウ内に現れ、manページが表示されると思います。</tt></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_vimperator_muttatorのプラグインとしてインストールした場合">9.1.2. Vimperator/Muttatorのプラグインとしてインストールした場合:</h4>
<div class="literalblock">
<div class="content">
<pre><tt>アドオン版と同様、Controlキーの2度押し (ctrl + ctrl) でtanasinnが起動します。
Vimperator/Muttatorのコマンドライン上から起動したい場合は、以下のようにタイプしてください。</tt></pre>
</div></div>
<div class="listingblock">
<div class="content">
<pre><tt>:tanasinnlaunch</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>もしターミナルスクリーンをVimperator/Muttatorから直接起動させたければ、以下のようにします:</tt></pre>
</div></div>
<div class="listingblock">
<div class="content">
<pre><tt>:tanasinnstart &lt;コマンド&gt;</tt></pre>
</div></div>
<div class="paragraph"><p>example:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>:tanasinnstart emacs -nw</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>tanasinnにコマンドを送信したいときは、以下のようにします:</tt></pre>
</div></div>
<div class="listingblock">
<div class="content">
<pre><tt>:tanasinncommand &lt;コマンド&gt;</tt></pre>
</div></div>
<div class="paragraph"><p>example:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>:tanasinncommand overlayecho Hello, World!</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>tanasinnにキー入力を送信したいときは、以下のようにします:</tt></pre>
</div></div>
<div class="listingblock">
<div class="content">
<pre><tt>:tanasinnsendkeys &lt;キーシーケンス式&gt;</tt></pre>
</div></div>
<div class="paragraph"><p>example:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>:tanasinnsendkeys &lt;nmode&gt;&lt;C-z&gt;top&lt;CR&gt;</tt></pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="_基本的な操作方法">9.2. 基本的な操作方法</h3>
<div class="literalblock">
<div class="content">
<pre><tt>xtermのような端末エミュレータを使ったことがあれば大体いけると思いますが、
以下のような特筆すべき仕様もいくつかあります。</tt></pre>
</div></div>
<div class="literalblock">
<div class="title">shift + shift (shiftキーの2度押し)</div>
<div class="content">
<pre><tt>ターミナルとコマンドラインテキストボックスの間でフォーカスを切り替えます。</tt></pre>
</div></div>
<div class="literalblock">
<div class="title">shift + マウスドラッグ</div>
<div class="content">
<pre><tt>ウィンドウの移動。</tt></pre>
</div></div>
<div class="literalblock">
<div class="title">alt + マウスで範囲選択</div>
<div class="content">
<pre><tt>矩形選択。 (Terminal.appの真似)</tt></pre>
</div></div>
<div class="literalblock">
<div class="title">ピンチオープン／クローズ</div>
<div class="content">
<pre><tt>フォントサイズの拡大・縮小。 (iTerm2の真似)</tt></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_コマンドラインインターフェースを使う">9.3. コマンドラインインターフェースを使う</h3>
<div class="imageblock">
<div class="content">
<img src="images/commandline.png" alt="images/commandline.png" width="480" />
</div>
</div>
<div class="literalblock">
<div class="content">
<pre><tt>[bold]*shift+shiftでコマンドラインにカーソルが移動します*。
これだけおぼえておけばとりあえず補完でなんとかなると思います。</tt></pre>
</div></div>
<div class="sect3">
<h4 id="_文字コード設定">9.3.1. 文字コード設定</h4>
<div class="sect4">
<h5 id="_decoder">decoder</h5>
<div class="paragraph"><p>アプリケーションの出力を解釈するための文字コード体系を設定します。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>decoder [キャラクタセット・符号化方式名]</tt></pre>
</div></div>
</div>
<div class="sect4">
<h5 id="_encoder">encoder</h5>
<div class="paragraph"><p>アプリケーションへの入力操作を行うときの文字コード体系を設定します。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>encoder [キャラクタセット・符号化方式名]</tt></pre>
</div></div>
<div class="paragraph"><p>使用可能な文字コード名はGeckoに依存します。補完で確認してください。</p></div>
<div class="imageblock">
<div class="content">
<img src="images/decoder.png" alt="images/decoder.png" width="780" />
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_地域化">9.3.2. 地域化</h4>
<div class="sect4">
<h5 id="_localize">localize</h5>
<div class="paragraph"><p>メッセージやUI要素のローカライズを行います。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>localize [ロケールID] "[メッセージID]" "[翻訳済み文字列]"</tt></pre>
</div></div>
<div class="paragraph"><p>[ロケールID](LCID)は日本語環境をお使いならたいていja-JPだと思います。</p></div>
<div class="imageblock">
<div class="content">
<img src="images/localize.png" alt="images/localize.png" width="780" />
</div>
</div>
<div class="paragraph"><p>[メッセージID]はgettextのように英語表現になっています。
この設定は通常の永続化機構とは別の仕組みで保存されますので、
saveprofileのような保存操作はとくに必要ありません。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="_外観の設定">9.3.3. 外観の設定</h4>
<div class="sect4">
<h5 id="_fgcolor">fgcolor</h5>
<div class="paragraph"><p>前景色を設定します。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>fgcolor [色番号] [CSS color]</tt></pre>
</div></div>
<div class="paragraph"><p>[色番号]に対応する前景色パレットに、[CSS color]で表現される色が設定・適用されます。</p></div>
</div>
<div class="sect4">
<h5 id="_bgcolor">bgcolor</h5>
<div class="paragraph"><p>背景色を設定します。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>bgcolor [色番号] [CSS color]</tt></pre>
</div></div>
<div class="paragraph"><p>[色番号]に対応する背景色パレットに、[CSS color]で表現される色が設定・適用されます。</p></div>
<div class="imageblock">
<div class="content">
<img src="images/bgcolor.png" alt="images/bgcolor.png" width="780" />
</div>
</div>
<div class="paragraph"><p>色番号は0から255までの整数です。
通常の16色カラー端末では0から15までが使用されます。</p></div>
</div>
<div class="sect4">
<h5 id="_fontfamily">fontfamily</h5>
<div class="paragraph"><p>フォントファミリを設定します。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>fontfamily [フォント名]</tt></pre>
</div></div>
<div class="paragraph"><p>ターミナルのフォントファミリが[フォント名]に設定・適用されます。</p></div>
<div class="imageblock">
<div class="content">
<img src="images/fontfamily3.png" alt="images/fontfamily3.png" width="780" />
</div>
</div>
</div>
<div class="sect4">
<h5 id="_fontsize">fontsize</h5>
<div class="paragraph"><p>フォントサイズを設定します。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>fontsize [フォントサイズ]</tt></pre>
</div></div>
<div class="paragraph"><p>ターミナルのフォントサイズが[フォントサイズ]pxに設定・適用されます。
単位がpixelであることに注意してください。</p></div>
<div class="imageblock">
<div class="content">
<img src="images/fontsize3.png" alt="images/fontsize3.png" width="780" />
</div>
</div>
</div>
<div class="sect4">
<h5 id="_increase">increase</h5>
<div class="paragraph"><p>フォントサイズを1px増加させます。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>increase</tt></pre>
</div></div>
<div class="paragraph"><p>数字のプレフィクスをつけて、以下のようにすると、フォントサイズが5px増加します。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>5increase</tt></pre>
</div></div>
</div>
<div class="sect4">
<h5 id="_decrease">decrease</h5>
<div class="paragraph"><p>フォントサイズを1px減少させます。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>decrease</tt></pre>
</div></div>
<div class="paragraph"><p>数字のプレフィクスをつけて、以下のようにすると、フォントサイズが5px減少します。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>5decrease</tt></pre>
</div></div>
</div>
</div>
<div class="sect3">
<h4 id="_ウィンドウ操作">9.3.4. ウィンドウ操作</h4>
<div class="sect4">
<h5 id="_up_down_left_right">up / down / left / right</h5>
<div class="paragraph"><p>ウィンドウを上下左右に移動させます。移動量はデフォルトで60pxです。
この値は、設定値moveshortcut.stepで変更できます。</p></div>
<div class="paragraph"><p>数字のプレフィクスをつけて、たとえば以下のようにすると、5 x 60px = 300px 右に移動します。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>5right</tt></pre>
</div></div>
</div>
<div class="sect4">
<h5 id="_wider_narrower_shorter_taller">wider / narrower / shorter / taller</h5>
<div class="paragraph"><p>ウィンドウサイズを調整します。</p></div>
<div class="paragraph"><p>数字のプレフィクスをつけて、たとえば以下のようにすると、スクリーンが5カラム拡大します。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>5wider</tt></pre>
</div></div>
</div>
</div>
<div class="sect3">
<h4 id="_blur_new">9.3.5. blur (new!)</h4>
<div class="paragraph"><p>ウィンドウからフォーカスをはずします。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>blur</tt></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_編集系操作">9.3.6. 編集系操作</h4>
<div class="sect4">
<h5 id="_copy">copy</h5>
<div class="paragraph"><p>選択されたテキストをクリップボードへコピーします。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>copy</tt></pre>
</div></div>
</div>
<div class="sect4">
<h5 id="_paste">paste</h5>
<div class="paragraph"><p>クリップボード内のテキストを現在のエンコーダーで符号化し、端末に送信します。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>paste</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>順次解説予定</tt></pre>
</div></div>
</div>
</div>
<div class="sect3">
<h4 id="_マッピング管理">9.3.7. マッピング管理</h4>
</div>
<div class="sect3">
<h4 id="_nmap">9.3.8. nmap</h4>
</div>
<div class="sect3">
<h4 id="_nnoremap">9.3.9. nnoremap</h4>
</div>
<div class="sect3">
<h4 id="_nunmap">9.3.10. nunmap</h4>
</div>
<div class="sect3">
<h4 id="_cmap_new">9.3.11. cmap (new!)</h4>
</div>
<div class="sect3">
<h4 id="_cnoremap_new">9.3.12. cnoremap (new!)</h4>
</div>
<div class="sect3">
<h4 id="_cunmap_new">9.3.13. cunmap (new!)</h4>
</div>
<div class="sect3">
<h4 id="_コンポーネント管理">9.3.14. コンポーネント管理</h4>
<div class="sect4">
<h5 id="_lscomponent">lscomponent</h5>
</div>
<div class="sect4">
<h5 id="_disable">disable</h5>
<div class="paragraph"><p>プラグインを無効化します。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>disable [プラグインID]</tt></pre>
</div></div>
</div>
<div class="sect4">
<h5 id="_enable">enable</h5>
<div class="paragraph"><p>プラグインを有効化します。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>enable [プラグインID]</tt></pre>
</div></div>
</div>
</div>
<div class="sect3">
<h4 id="_履歴管理">9.3.15. 履歴管理</h4>
<div class="sect4">
<h5 id="_clearhistory">clearhistory</h5>
<div class="paragraph"><p>コマンドラインヒストリをクリアします。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>clearhistory</tt></pre>
</div></div>
</div>
</div>
<div class="sect3">
<h4 id="_セッション操作">9.3.16. セッション操作</h4>
<div class="sect4">
<h5 id="_kill_quit">kill/quit</h5>
<div class="paragraph"><p>現在のセッションを終了し、ウィンドウを閉じます。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>kill</tt></pre>
</div></div>
<div class="paragraph"><p>または</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>quit</tt></pre>
</div></div>
</div>
<div class="sect4">
<h5 id="_detach">detach</h5>
<div class="paragraph"><p>現在のセッションをサスペンドし、ウィンドウを閉じます。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>detach</tt></pre>
</div></div>
</div>
</div>
<div class="sect3">
<h4 id="_プロファイル操作">9.3.17. プロファイル操作</h4>
<div class="sect4">
<h5 id="_loadprofile">loadprofile</h5>
<div class="paragraph"><p>永続化されたセッションプロファイルをロードします。
以下のようにすると"default"という名前のセッションプロファイルが "$HOME/.tanasinn/persist/default.js" から読み込まれます。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>loadprofile</tt></pre>
</div></div>
<div class="paragraph"><p>もし別のプロファイルを読み込みたければ:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>saveprofile [プロファイル名]</tt></pre>
</div></div>
<div class="paragraph"><p>としてください。
[プロファイル名]は英数字、ドット(.)、アンダースコア(_)、ハイフン(-)が使用可能です。</p></div>
</div>
<div class="sect4">
<h5 id="_saveprofile">saveprofile</h5>
<div class="paragraph"><p>現在のセッション設定を永続化します。
以下のようにすると現在のセッションプロファイルが"default"という名前で "$HOME/.tanasinn/persist/default.js" へ書き出されます。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>saveprofile</tt></pre>
</div></div>
<div class="paragraph"><p>もし別の名前で書き出したければ:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>saveprofile [プロファイル名]</tt></pre>
</div></div>
<div class="paragraph"><p>としてください。
[プロファイル名]は英数字、ドット(.)、アンダースコア(_)、ハイフン(-)が使用可能です。</p></div>
</div>
<div class="sect4">
<h5 id="_deleteprofile">deleteprofile</h5>
<div class="paragraph"><p>永続化されたセッション設定を削除します。
以下のようにするとセッションプロファイル"default"が削除されます。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>saveprofile</tt></pre>
</div></div>
<div class="paragraph"><p>もし別のセッションプロファイルを削除したければ:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>deleteprofile [プロファイル名]</tt></pre>
</div></div>
<div class="paragraph"><p>としてください。
[プロファイル名]は英数字、ドット(.)、アンダースコア(_)、ハイフン(-)が使用可能です。</p></div>
</div>
<div class="sect4">
<h5 id="_globalload">globalload</h5>
</div>
<div class="sect4">
<h5 id="_globalsave">globalsave</h5>
</div>
<div class="sect4">
<h5 id="_globaldelete">globaldelete</h5>
</div>
</div>
<div class="sect3">
<h4 id="_パネル操作">9.3.18. パネル操作</h4>
<div class="sect4">
<h5 id="_openpanel">openpanel</h5>
<div class="paragraph"><p>パネルを表示します。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>openpanel</tt></pre>
</div></div>
</div>
<div class="sect4">
<h5 id="_closepanel">closepanel</h5>
<div class="paragraph"><p>パネルを隠します。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>closepanel</tt></pre>
</div></div>
</div>
</div>
<div class="sect3">
<h4 id="_デバッグ支援">9.3.19. デバッグ支援</h4>
<div class="sect4">
<h5 id="_console">console</h5>
<div class="paragraph"><p>コンソールパネルの表示状態をトグルします。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>console</tt></pre>
</div></div>
</div>
<div class="sect4">
<h5 id="_debugger">debugger</h5>
<div class="paragraph"><p>デバッガパネルの表示状態をトグルします。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>debugger</tt></pre>
</div></div>
</div>
</div>
<div class="sect3">
<h4 id="_低レベル設定操作">9.3.20. 低レベル設定操作</h4>
<div class="sect4">
<h5 id="_set">set</h5>
</div>
<div class="sect4">
<h5 id="_setglobal">setglobal</h5>
</div>
</div>
<div class="sect3">
<h4 id="_低レベルメッセージング操作">9.3.21. 低レベルメッセージング操作</h4>
<div class="sect4">
<h5 id="_publish">publish</h5>
<div class="paragraph"><p>tupstartメッセージを発行します。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>publish &lt;メッセージ式&gt; &lt;Javascriptコード&gt;</tt></pre>
</div></div>
<div class="paragraph"><p>example</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>publish command/report-overlay-message "Hello, World!"</tt></pre>
</div></div>
</div>
</div>
<div class="sect3">
<h4 id="_ユーティリティ">9.3.22. ユーティリティ</h4>
<div class="sect4">
<h5 id="_sendkeys_new">sendkeys (new!)</h5>
<div class="paragraph"><p>指定されたキーシーケンス式を解釈し、キーイベントとして実行します。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>sendkeys [キーシーケンス式]</tt></pre>
</div></div>
<div class="paragraph"><p>example:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>sendkeys &lt;nmode&gt;&lt;C-z&gt;echo Hello, World!&lt;CR&gt;fg&lt;CR&gt;</tt></pre>
</div></div>
<div class="listingblock">
<div class="content">
<pre><tt>sendkeys &lt;PinchOpen&gt;</tt></pre>
</div></div>
</div>
<div class="sect4">
<h5 id="_source_new">source (new!)</h5>
<div class="paragraph"><p>指定されたファイルをtanasinnコマンドバッチファイルとして読み込み、実行します。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>source [ファイル・パス]</tt></pre>
</div></div>
</div>
<div class="sect4">
<h5 id="_import_new">import (new!)</h5>
<div class="paragraph"><p>指定されたファイル名を~/.tanasinn/batchesディレクトリから検索し、コマンドバッチファイルとして実行します。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>import [ファイル名]</tt></pre>
</div></div>
</div>
<div class="sect4">
<h5 id="_execcgi_new">execcgi (new!)</h5>
<div class="paragraph"><p>指定されたファイル名を~/.tanasinn/cgi-binディレクトリから検索し、実行した結果をコマンドバッチとして再解釈し、実行します。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>execcgi [ファイル名]</tt></pre>
</div></div>
<div class="paragraph"><p>引数で指定されるファイルは実行可能なものであればなんでもよいです。
たとえば、</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>  <span style="font-style: italic"><span style="color: #9A1900">#!/usr/bin/env perl</span></span>

  <span style="font-weight: bold"><span style="color: #0000FF">print</span></span> <span style="color: #990000">&lt;&lt;</span>EOM
  overlayecho Hello<span style="color: #990000">,</span> World<span style="color: #990000">!</span>
  EOM
</tt></pre></div></div>
<div class="paragraph"><p>のようにすればperlで記述できますし、</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>  #!/usr/bin/emacs23 -nw --script

  <span style="color: #FF0000">(</span>princ <span style="color: #FF0000">"enable console"</span><span style="color: #FF0000">)</span>
</tt></pre></div></div>
<div class="paragraph"><p>のようにすればelispが使えます。</p></div>
</div>
<div class="sect4">
<h5 id="_vimperator_new">vimperator (new!)</h5>
<div class="paragraph"><p>vimperatorにコマンドを送ります。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>vimperator [command]</tt></pre>
</div></div>
</div>
<div class="sect4">
<h5 id="_echo_new">echo (new!)</h5>
<div class="paragraph"><p>ステータスラインにメッセージを表示します。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>echo [メッセージ]</tt></pre>
</div></div>
</div>
<div class="sect4">
<h5 id="_overlayecho_new">overlayecho (new!)</h5>
<div class="paragraph"><p>オーバーレイインジケータにメッセージを表示します。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>overlayecho [メッセージ]</tt></pre>
</div></div>
</div>
<div class="sect4">
<h5 id="_screenshot_new">screenshot (new!)</h5>
<div class="paragraph"><p>現在のスクリーンを画像形式(png)で保存します。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>screenshot [ファイル名]</tt></pre>
</div></div>
<div class="paragraph"><p>たとえば</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>screenshot abc</tt></pre>
</div></div>
<div class="paragraph"><p>とすると、{$HOME,%USERPROFILE%}/.tanasinn/screenshot/abc.pngにスクリーンショット画像が保存されます。</p></div>
</div>
<div class="sect4">
<h5 id="_javascript">javascript</h5>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ユーザーディレクトリ">9.4. ユーザーディレクトリ</h3>
<div class="listingblock">
<div class="content">
<pre><tt>~/ or %USERPROFILE%/
   |
   +-- .tanasinn.js &lt;-------------------------------- (1)
   |
   +-- .tanasinn/ &lt;-------------------------------- (2)
         |
         +-- tanasinnrc &lt;---------------------- (3)
         |
         +-- sessions.txt &lt;---------------------- (4)
         |
         +-- desktop_profile/ &lt;---------------------- (5)
         |
         +-- session_profile/ &lt;---------------------- (6)
         |
         +-- persist/ &lt;---------------------- (7)
         |
         +-- history/ &lt;---------------------- (8)
         |
         +-- batches/ &lt;---------------------- (9)
         |
         +-- cgi-bin/ &lt;---------------------- (10)
         |
         +-- screenshot/ &lt;------------------- (11)
         |
         +-- log/ &lt;---------------------- (12)
         |
         +-- modules/ &lt;---------------------- (13)
                |
                +-- process_components/ &lt;------ (14)
                |
                +-- desktop_components/ &lt;------ (15)
                |
                +-- session_components/ &lt;------ (16)
                |
                +-- shared_components/ &lt;------ (17)</tt></pre>
</div></div>
<div class="sect3">
<h4 id="_tanasinn_js">9.4.1. .tanasinn.js</h4>
<div class="paragraph"><p>起動時(Processオブジェクトが生成されるタイミング)に読み込まれ、実行されるJavascriptファイル。</p></div>
<div class="listingblock">
<div class="title">~/.tanasinn.js Or %USERPROFILE%¥.tanasinn.js</div>
<div class="content">
<pre><tt>process.cygwin_root = "C:\\cygwin";
process.bin_path = "/bin:/usr/bin:/usr/local/bin:/opt/local/bin";
process.python_path = "/usr/bin/python"</tt></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_tanasinn">9.4.2. .tanasinn/</h4>
<div class="paragraph"><p>ランタイムディレクトリ。</p></div>
</div>
<div class="sect3">
<h4 id="_tanasinn_tanasinnrc">9.4.3. .tanasinn/tanasinnrc</h4>
<div class="paragraph"><p>セッション生成時(Sessionオブジェクトが生成されるタイミング)に読み込まれ、1行づつ実行されるtanasinnコマンドファイル。</p></div>
<div class="paragraph"><p>設定例：</p></div>
<div class="listingblock">
<div class="title">.tanasinn/tanasinnrc</div>
<div class="content">
<pre><tt>  nmap &lt;C-S-o&gt; &lt;cmode&gt;detach&lt;CR&gt;
  nmap &lt;C-S-i&gt; &lt;2-shift&gt;blur&lt;CR&gt;
  nnoremap &lt;C-S-z&gt; &lt;2-shift&gt;
  cmap &lt;C-z&gt; &lt;2-shift&gt;
  cmap &lt;C-s&gt; &lt;C-a&gt;&lt;C-k&gt;vimperator set!&lt;CR&gt;
  set renderer.normal_alpha=0.8
  set renderer.font_size=20
  set outerchrome.background_opacity=0.8
  set outerchrome.background="-moz-radial-gradient(center, circle closest-side, #404040, #000)"</tt></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_tanasinn_sessions_txt">9.4.4. .tanasinn/sessions.txt</h4>
<div class="paragraph"><p>デタッチ中のセッションを管理するためのファイル。</p></div>
</div>
<div class="sect3">
<h4 id="_tanasinn_desktop_profile">9.4.5. .tanasinn/desktop_profile/</h4>
<div class="paragraph"><p>Desktopオブジェクトの設定が書き出されるディレクトリ。</p></div>
</div>
<div class="sect3">
<h4 id="_tanasinn_session_profile">9.4.6. .tanasinn/session_profile/</h4>
<div class="paragraph"><p>Sessionオブジェクトの設定が書き出されるディレクトリ。</p></div>
</div>
<div class="sect3">
<h4 id="_tanasinn_persist">9.4.7. .tanasinn/persist/</h4>
<div class="paragraph"><p>休眠中のセッションが永続化されて書き出されるディレクトリ。</p></div>
</div>
<div class="sect3">
<h4 id="_tanasinn_screenshot">9.4.8. .tanasinn/screenshot/</h4>
<div class="paragraph"><p>スクリーンショット画像が書き出されるディレクトリ。</p></div>
</div>
<div class="sect3">
<h4 id="_tanasinn_log">9.4.9. .tanasinn/log/</h4>
<div class="paragraph"><p>ログが書き出されるディレクトリ。</p></div>
</div>
<div class="sect3">
<h4 id="_tanasinn_batches">9.4.10. .tanasinn/batches/</h4>
<div class="paragraph"><p>importコマンドの引数として与えられたファイル名が検索されるディレクトリ。</p></div>
</div>
<div class="sect3">
<h4 id="_tanasinn_cgi_bin">9.4.11. .tanasinn/cgi-bin/</h4>
<div class="paragraph"><p>execcgiコマンドの引数として与えられたファイル名が検索されるディレクトリ。</p></div>
</div>
<div class="sect3">
<h4 id="_tanasinn_modules">9.4.12. .tanasinn/modules/</h4>
<div class="paragraph"><p>このディレクトリ内にユーザー拡張やユーザーデータが配置されます。</p></div>
</div>
<div class="sect3">
<h4 id="_tanasinn_modules_process_components">9.4.13. .tanasinn/modules/process_components/</h4>
<div class="paragraph"><p>プロセスバスに接続されるユーザー拡張が配置されるディレクトリ。</p></div>
</div>
<div class="sect3">
<h4 id="_tanasinn_modules_desktop_components">9.4.14. .tanasinn/modules/desktop_components/</h4>
<div class="paragraph"><p>デスクトップバスに接続されるユーザー拡張が配置されるディレクトリ。</p></div>
</div>
<div class="sect3">
<h4 id="_tanasinn_modules_session_components">9.4.15. .tanasinn/modules/session_components/</h4>
<div class="paragraph"><p>セッションバスに接続されるユーザー拡張が配置されるディレクトリ。</p></div>
</div>
<div class="sect3">
<h4 id="_tanasinn_modules_shared_components">9.4.16. .tanasinn/modules/shared_components/</h4>
<div class="paragraph"><p>デスクトップバス・セッションバス両方に接続されるユーザー拡張が配置されるディレクトリ。</p></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tips">10. Tips</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_モジュールの有効_無効を切り替えるには">10.1. モジュールの有効・無効を切り替えるには</h3>
<div class="paragraph"><p>コマンドラインから以下のようにタイプしてみてください。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>enable &lt;プラグインID&gt;</tt></pre>
</div></div>
<div class="listingblock">
<div class="content">
<pre><tt>disable &lt;プラグインID&gt;</tt></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_セッションの設定を永続化_ロードするには">10.2. セッションの設定を永続化・ロードするには</h3>
<div class="paragraph"><p>コマンドラインから以下のようにタイプしてみてください。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>saveprofile</tt></pre>
</div></div>
<div class="paragraph"><p>こうすれば現在のセッションの設定が "$HOME/.tanasinn/persist/default.js" へ書き出されるでしょう。
もし別の名前で書き出したければ:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>saveprofile &lt;プロファイル名&gt;</tt></pre>
</div></div>
<div class="paragraph"><p>これで設定が"$HOME/.tanasinn/profile/&lt;プロファイル名&gt;.js"に書き出されます。</p></div>
<div class="paragraph"><p>この設定を再び読み込むには以下のようにします:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>loadprofile &lt;プロファイル名&gt;</tt></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_現在のセッションからデタッチするには">10.3. 現在のセッションからデタッチするには</h3>
<div class="paragraph"><p>コマンドラインから以下のようにタイプしてみてください。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>detach</tt></pre>
</div></div>
<div class="paragraph"><p>セッションはサスペンドされます。ランチャーインターフェースからこのセッションに再接続することができます。</p></div>
</div>
<div class="sect2">
<h3 id="_現在のセッションを終了するには">10.4. 現在のセッションを終了するには</h3>
<div class="paragraph"><p>コマンドラインから以下のようにタイプしてみてください。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>kill</tt></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_vimperator_muttatorプラグインとしてインストールしたとき_lt_c_i_gt_インプットフィールドを外部エディタで編集_と_gf_htmlソースを外部ビューワで閲覧_マッピングをフックするには">10.5. Vimperator/Muttatorプラグインとしてインストールしたとき、 "&lt;C-i&gt;"(インプットフィールドを外部エディタで編集) と "gF"(HTMLソースを外部ビューワで閲覧) マッピングをフックするには</h3>
<div class="paragraph"><p>インプトッフィールドをtanasinn上の外部エディタで編集したければ、vimperatorrc/muttatorrcに
以下のコマンドを追加してください。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>let g:tanasinneditorcommand="vim %"</tt></pre>
</div></div>
<div class="paragraph"><p>この例ではvimコマンドがシステムにインストールされている必要があります。
「%」の部分はテンポラリファイルのパスに置換されます。</p></div>
<div class="paragraph"><p>HTMLソースをtanasinnで見るには、以下のコマンドを追加します。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>let g:tanasinnviewsourcecommand="vim +e '%'"</tt></pre>
</div></div>
<div class="paragraph"><p>「%」はエスケープ済みのURL文字列に置換されます。
この例ではvimのインストールが必要になります。</p></div>
</div>
<div class="sect2">
<h3 id="_vimで現在のウィンドウにブラウザをオーバーレイで出したい">10.6. Vimで現在のウィンドウにブラウザをオーバーレイで出したい</h3>
<div class="paragraph"><p>「Overlay Browser」という拡張をやっつけで書いてスナップショットビルドに入れておいたので、とりいそぎですが使用方法をご説明します。</p></div>
<div class="paragraph"><p>以下のようなVim Scriptを書いてください。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>function! s:open_gecko_window(src)
    let nr = winnr()
    let col = wincol()
    let line = winline()
    let width = winwidth(nr)
    let height = winheight(nr)
    call system('echo -en "\x1b]210;'.col.' '.line.' '.width.' '.height.' '.a:src.'\x07" &gt; /dev/tty')
endfunction

function! s:close_gecko_window()
    call system('echo -en "\x1b]211;\x07" &gt; /dev/tty')
endfunction

command -nargs=1 OpenMozilla call s:open_gecko_window(&lt;f-args&gt;)
command CloseMozilla call s:close_gecko_window()</tt></pre>
</div></div>
<div class="paragraph"><p>このようにして使用します。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>OpenMozilla http:</tt></pre>
</div></div>
<div class="imageblock">
<div class="content">
<img src="images/browser.png" alt="images/browser.png" width="780" />
</div>
</div>
<div class="paragraph"><p>Vim側では、ウィンドウを閉じるとき</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>CloseMozilla</tt></pre>
</div></div>
<div class="paragraph"><p>を呼んで自分で状態管理していただく必要があります。
まだリサイズとかアップデートを実装していませんので使いづらいと思います。</p></div>
</div>
<div class="sect2">
<h3 id="_ターミナルからtanasinnに対してコマンドを送りたい">10.7. ターミナルからtanasinnに対してコマンドを送りたい</h3>
<div class="paragraph"><p>以下のような文字列を、TTYデバイスに対して送ってください。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>¥x1b]220;&lt;コマンド&gt;¥x07</tt></pre>
</div></div>
<div class="paragraph"><p>tanasinnはこれをtanasinnコマンドとして解釈し、実行します。
コマンドはtanasinnが使用しているデコーダーの符号化方式と同じものを使用してエンコードされている必要があります。</p></div>
<div class="paragraph"><p>たとえば、シェルから</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>echo -en "¥e]220;overlayecho Hello, World!¥a"</tt></pre>
</div></div>
<div class="paragraph"><p>とタイプすると、tanasinnにはコマンド「overlayecho Hello, World!」が渡ります。</p></div>
</div>
<div class="sect2">
<h3 id="_キーマッピングの設定">10.8. キーマッピングの設定</h3>
<div class="literalblock">
<div class="content">
<pre><tt>tanasinnはVim scriptにファジーに似せた感じの書式でマッピング操作ができるコマンドを提供します。</tt></pre>
</div></div>
<div class="ulist"><ul>
<li>
<p>
nmap [置換対象キーシーケンス式] [置換後のキーシーケンス式]
</p>
<div class="literalblock">
<div class="content">
<pre><tt>ノーマルモードのマッピングを設定します。</tt></pre>
</div></div>
</li>
<li>
<p>
cmap [置換対象キーシーケンス式] [置換後のキーシーケンス式]
</p>
<div class="literalblock">
<div class="content">
<pre><tt>コマンドラインモードのマッピングを設定します。</tt></pre>
</div></div>
</li>
<li>
<p>
特殊なキー
</p>
<div class="ulist"><ul>
<li>
<p>
リーダーキー
</p>
<div class="ulist"><ul>
<li>
<p>
&lt;Leader&gt; - 設定値nmap_manager.mapleaderおよびcmap_manager.mapleaderの値
</p>
</li>
</ul></div>
</li>
<li>
<p>
モードスイッチ仮想キー
</p>
<div class="ulist"><ul>
<li>
<p>
&lt;nmode&gt; - ノーマルモード
</p>
</li>
<li>
<p>
&lt;cmode&gt; - コマンドラインモード
</p>
</li>
</ul></div>
</li>
<li>
<p>
モディファイヤ2度押し
</p>
<div class="ulist"><ul>
<li>
<p>
&lt;2-Shift&gt; - Shift key twice.
</p>
</li>
</ul></div>
</li>
<li>
<p>
スワイプジェスチャイベント仮想キー(一部のプラットフォームのみ)
</p>
<div class="ulist"><ul>
<li>
<p>
&lt;SwipeLeft&gt; - 左にスワイプ
</p>
</li>
<li>
<p>
&lt;SwipeRight&gt; - 右にスワイプ
</p>
</li>
<li>
<p>
&lt;SwipeTop&gt; - 上にスワイプ
</p>
</li>
<li>
<p>
&lt;SwipeBottom&gt; - 下にスワイプ
</p>
</li>
</ul></div>
</li>
<li>
<p>
ピンチジェスチャイベント仮想キー(一部のプラットフォームのみ)
</p>
<div class="ulist"><ul>
<li>
<p>
&lt;PinchOpen&gt; - ピンチオープン
</p>
</li>
<li>
<p>
&lt;PinchClose&gt; - ピンチクローズ
</p>
</li>
</ul></div>
</li>
<li>
<p>
回転ジェスチャイベント仮想キー(一部のプラットフォームのみ)
</p>
<div class="ulist"><ul>
<li>
<p>
&lt;RotateRight&gt; - 時計回りに回転
</p>
</li>
<li>
<p>
&lt;RotateLeft&gt; - 反時計回りに回転
</p>
</li>
</ul></div>
</li>
</ul></div>
</li>
</ul></div>
<div class="listingblock">
<div class="title">設定例 .tanasinn/tanasinnrc</div>
<div class="content">
<pre><tt> ##############################################################################
 #
 # Set Leader keys mappings
 #

 # set &lt;Leader&gt;
 set nmap_manager.mapleader="&lt;C-s&gt;"
 set cmap_manager.mapleader="&lt;C-s&gt;"

 ##############################################################################
 #
 # Gesture mappings
 #

 #for tmux
 nmap &lt;SwipeLeft&gt; &lt;C-b&gt;p
 nmap &lt;SwipeRight&gt; &lt;C-b&gt;n
 nmap &lt;SwipeDown&gt; &lt;C-b&gt;%
 nmap &lt;SwipeUp&gt; &lt;C-b&gt;!
 nmap &lt;RotateLeft&gt; &lt;C-b&gt;&lt;Space&gt;
 nmap &lt;RotateRight&gt; &lt;C-b&gt;&lt;Space&gt;

 # zoom in/out
 nmap &lt;PinchOpen&gt; &lt;cmode&gt;increase&lt;CR&gt;
 nmap &lt;PinchClose&gt; &lt;cmode&gt;decrease&lt;CR&gt;

 ##############################################################################
 #
 # &lt;Leader&gt; mode
 #

 # zoom in/out
 nmap &lt;Leader&gt;, &lt;cmode&gt;decrease&lt;CR&gt;&lt;Leader&gt;
 nmap &lt;Leader&gt;. &lt;cmode&gt;increase&lt;CR&gt;&lt;Leader&gt;

 # move window
 nmap &lt;Leader&gt;h &lt;cmode&gt;left&lt;CR&gt;&lt;Leader&gt;
 nmap &lt;Leader&gt;j &lt;cmode&gt;down&lt;CR&gt;&lt;Leader&gt;
 nmap &lt;Leader&gt;k &lt;cmode&gt;up&lt;CR&gt;&lt;Leader&gt;
 nmap &lt;Leader&gt;l &lt;cmode&gt;right&lt;CR&gt;&lt;Leader&gt;

 # break &lt;Leader&gt; mode
 nmap &lt;Leader&gt;&lt;Esc&gt; &lt;nmode&gt;</tt></pre>
</div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_既知の問題">11. 既知の問題</h2>
<div class="sectionbody">
<div class="ulist"><ul>
<li>
<p>
Windows + Cygwin 環境では起動やエミュレーションがやや遅いです。
</p>
</li>
<li>
<p>
キーボードがSandS(Space and Shift)環境だとspace + space で shift + shift を検出してしまいます。代替手段を用意しなければいけません。
</p>
</li>
<li>
<p>
NIC無効時には動きません。
</p>
</li>
<li>
<p>
開発版につき無駄に何回もloadScriptします。メモリ食いすぎ。
</p>
</li>
<li>
<p>
Python3未対応。Python2系が必要。
</p>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="_拡張モジュール開発">12. 拡張モジュール開発</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_tanasinnにおける_拡張モジュール_と_プラグイン">12.1. tanasinnにおける「拡張モジュール」と「プラグイン」</h3>
<div class="paragraph"><p>拡張モジュールは、ファイル単位で認識され、所定のタイミングで実行されるJavascriptコードです。
Vimperatorにおけるプラグインと似たような概念です。
tanasinnにおけるプラグインは、拡張モジュールによりエクスポートされ、必要に応じてロードしたり、すきなとき
にアンロードできるソフトウェア部品です。プラグアンドプレイのための一定の仕様を満たしたソフトウェア的実体、
という感じです。tanasinnバージョン0.1.5.4からは、プラグインマネージャが下図のように依存関係を追跡して
管理しますので、プラグインの動的な有効化・無効化がかなり安全に行えるようになっています。</p></div>
<div class="imageblock">
<div class="content">
<img src="images/pluginview.png" alt="images/pluginview.png" width="780" />
</div>
</div>
</div>
<div class="sect2">
<h3 id="_拡張モジュール開発に向いている人">12.2. 拡張モジュール開発に向いている人</h3>
<div class="paragraph"><p>以下のような方はぜひ拡張モジュールを書いてみてください。</p></div>
<div class="ulist"><ul>
<li>
<p>
Mozilla環境のCUI/TUI的エンハンスに興味を持たれている方
</p>
</li>
<li>
<p>
TUI環境のGUI的エンハンスやWebとの融合に興味を持たれている方
</p>
</li>
<li>
<p>
端末エミュレーションマニアでVTやTektronixやWyse端末やSixelを実装するのが好きな方
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_拡張モジュール作成_初級編チュートリアル">12.3. 拡張モジュール作成 初級編チュートリアル</h3>
<div class="literalblock">
<div class="content">
<pre><tt>tanasinnの基礎概念の習得からコンポーネント作成を経て、セッションプラグイン作成まで、なるべく飛ばないように
順を追って説明していきます。
注：現在、チュートリアルを書いていて、「この説明だるい、まどろっこしい、名前が良くない」と思ったところは思い
   切ってプログラムの方を変更して単純化していますので、サンプルコードがかなりバージョンセンシティブ化しています。
   最新版のtanasinnでお試しください。</tt></pre>
</div></div>
<div class="sect3">
<h4 id="_チュートリアルの方針">12.3.1. チュートリアルの方針</h4>
<div class="literalblock">
<div class="content">
<pre><tt>このチュートリアルでは、簡単なtanasinnプラグインの作成過程を、なるべく平易な形で説明していきたいと思います。
初級編なので、「覚えることを最小限に」をモットーとしたいと思います。
拡張モジュールを書くためにtanasinnコアのソースをいきなり読みはじめるのはおすすめしません。
読むと精神的にやられます。
あのような書き方をせずとも、実はそこそこクリーンなJavascriptコードでプラグインを記述することができます。
記述は少し冗長になりますが総合的にみてずっと生産的です。
本チュートリアルではクリーンで単純なサンプル提示を心掛けます。</tt></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_イベントバスの概念">12.3.2. イベントバスの概念</h4>
<div class="literalblock">
<div class="content">
<pre><tt>チュートリアルに入る前に、これだけはどうしても触れておかなければなりません。「イベントバス」です。
「覚えることを最小限に」をふまえたうえでも、この説明だけはちょっとはずせません。
tanasinnは結合度的にかなりゆるいタイプのコンポーネントフレームワークを基盤として
構築されており、コンポーネント間のコミュニケーションは基本、同期的なメッセージ指向です。
そのメッセージ(セマンティクス上はイベントだったりコマンドだったりget関数だったりする)は、下図に示されるような
階層化されたバス上を流れています。</tt></pre>
</div></div>
<div class="imageblock">
<div class="content">
<img src="images/busmodel.png" alt="images/busmodel.png" />
</div>
<div class="title">Figure 27. tanasinn Bus Model</div>
</div>
<div class="literalblock">
<div class="content">
<pre><tt>階層的に構築されたLANのようなものをイメージしてもらえるといいと思います。
ソフトウェアパターン的には、Observerパターンを階層化したもの、ととらえるとわかりやすいかなと思います。
このような階層において子要素を持つもの、上図においては、Process、Desktop、Sessionのようなものが、イベントを管理しています。
tanasinnハッカー達はこれを「イベントブローカー」、あるいは単に「ブローカー」と呼んでいます。
また逆にこの親要素にぶらさがっているもの、上図においてはProcess以外のノードを、「コンポーネント」と呼んでいます。
たとえば上の図でいうと、DesktopとSessionはイベントブローカー兼コンポーネントということになります。
コンポーネント「tty」はSessionというイベントブローカーを介してコンポーネント「screen」にメッセージを送ったりできるわけです。
イベントはUIウィジェットにおけるそれのようにキャプチャリングされたり、バブリングしたりすることはなく、
必要なら明示的にルーティングしてやる必要があります。
またVimperator/KeySnail使い的にはやや戸惑うかと思われますが、ブローカーはその子供(コンポーネント)に対する参照をもちません。
たとえばSessionというオブジェクトから「tty」への参照を明示的にひっぱってくることができません。
ややめんどくさいですがtanasinn全体がこのようなルールで構築されています。</tt></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_準備">12.3.3. 準備</h4>
<div class="literalblock">
<div class="content">
<pre><tt>まず、お使いのFirefox/Thunderbird/SeaMonkey等にtanasinnを導入してください。
以下の説明はtanasinn 0.1.5.4以上の環境を想定しているので、tanasinnは最新版を入れておいてください。
$HOME/.tanasinnがすでにある場合、以降の説明がtanasinnの実際の動きと食い違うことがあるかもしれませんので、
リネーム等しておくと、はまらなくてよいです。</tt></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_サンプル1_エントリーポイント">12.3.4. サンプル1 - エントリーポイント</h4>
<div class="paragraph"><p>以下のようなサンプルを作成してください。</p></div>
<div class="listingblock">
<div class="title">sample1.js</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>
<span style="font-weight: bold"><span style="color: #0000FF">function</span></span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">(</span>broker<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
  broker<span style="color: #990000">.</span>window<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">alert</span></span><span style="color: #990000">(</span>broker<span style="color: #990000">);</span>
<span style="color: #FF0000">}</span>
</tt></pre></div></div>
<div class="literalblock">
<div class="content">
<pre><tt>これを、
%USERPROFILE%¥.tanasinn¥modules¥session_components¥ (Windows)
$HOME/.tanasinn/modules/session_components/ (Mac/Linux/FreeBSD)
につっこみます。フォルダ(ディレクトリ)は無いと思うので作成してください。</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>この状態でターミナルセッションを開始してみます。
こうなります。</tt></pre>
</div></div>
<div class="imageblock">
<div class="content">
<img src="images/sample1.png" alt="images/sample1.png" width="500" />
</div>
</div>
<div class="literalblock">
<div class="content">
<pre><tt>ここでもし余裕があればalert関数の中身を変えるなどして、いろいろ実験してみてください。
聡明な方なら以下のことがわかると思います。</tt></pre>
</div></div>
<div class="ulist"><ul>
<li>
<p>
このプラグインモジュールのエントリポイントはmainというシンボルをもつ関数。引数にはSessionオジェクトが与えられている。
</p>
</li>
<li>
<p>
このプラグインモジュールはセッションが開始されるタイミングで読み込み直され、変更等も反映されている。
</p>
</li>
<li>
<p>
chromeウィンドウオブジェクトはセッションオブジェクトのwindowプロパティでとれる。
</p>
<div class="literalblock">
<div class="content">
<pre><tt>Sessionオブジェクトはセッションバスを管理するブローカーです。
ターミナルウィンドウがひとつ立ち上がるごとに、Sessionオブジェクトが生成されています。
windowやdocument等のDOMオブジェクトがコンテキストに入ってきていないことにも注意してください。</tt></pre>
</div></div>
</li>
</ul></div>
</div>
<div class="sect3">
<h4 id="_サンプル2_イベントとトピック">12.3.5. サンプル2 - イベントとトピック</h4>
<div class="literalblock">
<div class="content">
<pre><tt>今度はセッションバス上を飛び交うメッセージを補足し、他のプラグインとコミュニケートしてみます。簡単です。</tt></pre>
</div></div>
<div class="listingblock">
<div class="title">sample2.js</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>
<span style="font-weight: bold"><span style="color: #0000FF">function</span></span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">(</span>broker<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
  broker<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">subscribe</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"event/before-input"</span><span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #0000FF">function</span></span><span style="color: #990000">(</span>message<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
    broker<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">notify</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"command/report-overlay-message"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"key pressed: '"</span> <span style="color: #990000">+</span> message <span style="color: #990000">+</span> <span style="color: #FF0000">"'"</span><span style="color: #990000">);</span>
  <span style="color: #FF0000">}</span><span style="color: #990000">);</span>
<span style="color: #FF0000">}</span>
</tt></pre></div></div>
<div class="literalblock">
<div class="content">
<pre><tt>下図のように、キーボードを押すたびにオーバーレイインジケータが出てくると思います。</tt></pre>
</div></div>
<div class="imageblock">
<div class="content">
<img src="images/sample2.png" alt="images/sample2.png" width="700" />
</div>
</div>
<div class="literalblock">
<div class="content">
<pre><tt>これは、「input」というコンポーネントからメッセージを受けとり、プラグイン「Overlay Indicator」にデータを
渡しています。"event/before-input" や "command/report-overlay-message" はイベントソースを識別するた
めの文字列で、「トピック」と呼ばれています。</tt></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_サンプル3_デバッグ環境をととのえる">12.3.6. サンプル3 - デバッグ環境をととのえる</h4>
<div class="literalblock">
<div class="content">
<pre><tt>つぎのサンプルにとりかかる前に、デバッグ環境を補強しましょう。
コンソールを有効化します。</tt></pre>
</div></div>
<div class="listingblock">
<div class="content">
<pre><tt>enable console
saveprofile</tt></pre>
</div></div>
<div class="imageblock">
<div class="content">
<img src="images/enableconsole.png" alt="images/enableconsole.png" width="500" />
</div>
</div>
<div class="paragraph"><p>起動してみましょう。</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>console</tt></pre>
</div></div>
<div class="imageblock">
<div class="content">
<img src="images/console.png" alt="images/console.png" width="770" />
</div>
</div>
<div class="paragraph"><p>すこしコードも書いてみましょう。</p></div>
<div class="listingblock">
<div class="title">sample3.js</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>
<span style="font-weight: bold"><span style="color: #0000FF">function</span></span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">(</span>broker<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
  broker<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">subscribe</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"event/before-input"</span><span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #0000FF">function</span></span><span style="color: #990000">(</span>message<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
    <span style="font-weight: bold"><span style="color: #0000FF">throw</span></span> <span style="color: #FF0000">"an error occured !!"</span><span style="color: #990000">;</span>
  <span style="color: #FF0000">}</span><span style="color: #990000">);</span>
<span style="color: #FF0000">}</span>
</tt></pre></div></div>
<div class="literalblock">
<div class="content">
<pre><tt>なにかキーボードを押して"event/before-input"イベントを発生させるたびに、エラーが補足されます。
こうなります。</tt></pre>
</div></div>
<div class="imageblock">
<div class="content">
<img src="images/sample3.png" alt="images/sample3.png" width="770" />
</div>
</div>
<div class="literalblock">
<div class="content">
<pre><tt>例外が自動補足されるということは、例外がコンポーネント境界を超えて伝播されないということでもあり
(実際は伝播させる方法もありますが)、tanasinnは基本、エラーに対してとてもルーズな
立場をとります。こまめにコンソールをチェックして対処するというケースが多いです。
テスト機構が完成すれば事情はもうちょっとましになりますが。
さきほどconsoleを有効化しましたが、通常使用時にはパフォーマンスを下げるので無効化しておいたほうが良いです。
consoleがなくても、ランタイムディレクトリ以下のlog/tanasinn-js.logを見ればエラー等を診断できます。</tt></pre>
</div></div>
<div class="listingblock">
<div class="content">
<pre><tt>disable console
saveprofile</tt></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_サンプル4_コンポーネントオブジェクトの作成">12.3.7. サンプル4 - コンポーネントオブジェクトの作成</h4>
<div class="literalblock">
<div class="content">
<pre><tt>コンポーネントを作成しましょう。
コンポーネントはプラグインの一歩手前の、プラグアンドプレイをサポートしない原始的なオブジェクトです。
tanasinnの規約によるとコンポーネントの最小要件は、以下のとおりです。</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>.英数字及びアンダースコア(_)、ハイフン(-)、ドット(.)の組み合せで表現されるString型のidをもつ。
.メッセージ "get/components" に対して、自分自身を返す。</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>コードで表現してみましょう。</tt></pre>
</div></div>
<div class="listingblock">
<div class="title">sample4.js</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>
<span style="font-weight: bold"><span style="color: #0000FF">function</span></span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">(</span>broker<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #0000FF">var</span></span> plugin <span style="color: #990000">=</span> <span style="color: #FF0000">{</span>
    id<span style="color: #990000">:</span> <span style="color: #FF0000">"sample"</span>
  <span style="color: #FF0000">}</span><span style="color: #990000">;</span>
  broker<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">subscribe</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"get/components"</span><span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #0000FF">function</span></span><span style="color: #990000">(</span>message<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
    <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> plugin<span style="color: #990000">;</span>
  <span style="color: #FF0000">}</span><span style="color: #990000">);</span>
<span style="color: #FF0000">}</span>
</tt></pre></div></div>
<div class="literalblock">
<div class="content">
<pre><tt>コンポーネントの登録に相当する部分です。
登録というよりも、コンポーネントいるかーとか、メニューアイテムいるかーとか、バスに対して訊いてみて、
だれかが反応するような感じです。tanasinnではだいたいの事柄がそんなふうに表現されています。ほとんどがメッセージです。
ただし、idやenabledというシグネチャ等を要求することもあるので部分的にインターフェース指向でもあります。</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>今回のサンプルは他のコンポーネントとおしゃべりするための準備だったのですが、このままだと達成感ゼロなので、
最新ビルドにはlscomponentというコマンドを入れておきました。
何もしないコマンドなのですが、補完でコンポーネントを列挙します。
これです。</tt></pre>
</div></div>
<div class="imageblock">
<div class="content">
<img src="images/sample4.png" alt="images/sample4.png" width="770" />
</div>
</div>
<div class="literalblock">
<div class="content">
<pre><tt>今回作成したsampleが、ちゃんとコンポーネントとして認識されています。
軽く100を超えるコンポーネントからtanasinnが構成されていることがわかりますね。</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>----- つづく。</tt></pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="_拡張モジュール作成_中級編チュートリアル">12.4. 拡張モジュール作成 中級編チュートリアル</h3>
<div class="paragraph"><p>tanasinnが提供する基礎的なサービスである、イベント式、遅延構築テンプレート、ローカライズ機構、フック機構等の意義と構造を説明し、それらを使用してシーケンスハンドラ、コンプリーター、補完表示ドライバ、エンコーダー・デコーダー、メニューアイテム等、実用的なコンポーネントを作成していく手法を例示します。これらのツールや概念を覚えるとtanasinn拡張を美しく優雅に書くことができますが、tanasinn以外ではまったく役に立ちません。</p></div>
<div class="literalblock">
<div class="content">
<pre><tt>----- coming soon.</tt></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_拡張モジュール作成_上級編チュートリアル">12.5. 拡張モジュール作成 上級編チュートリアル</h3>
<div class="paragraph"><p>tanasinn向けにデザインされたMOPシステムtupbaseの概要と、その拡張法について説明します。コアモジュールを読みたい・いじりたい人向け。デスクトップ拡張やプロセス拡張、独自端末モード拡張等についてもここで触れます。これもtanasinn以外ではまったく役に立ちません。</p></div>
<div class="literalblock">
<div class="content">
<pre><tt>----- coming soon.</tt></pre>
</div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_developing_materials">13. Developing materials</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_hierarchical_event_broker_pattern">13.1. Hierarchical event broker pattern</h3>
<div class="imageblock">
<div class="content">
<img src="images/hebp.png" alt="images/hebp.png" />
</div>
</div>
</div>
<div class="sect2">
<h3 id="_event_bus">13.2. Event bus</h3>
<div class="imageblock">
<div class="content">
<img src="images/busmodel.png" alt="images/busmodel.png" />
</div>
</div>
</div>
<div class="sect2">
<h3 id="_system_stack">13.3. System stack</h3>
<div class="imageblock">
<div class="content">
<img src="images/systemstack.png" alt="images/systemstack.png" />
</div>
</div>
</div>
<div class="sect2">
<h3 id="_object_system">13.4. Object system</h3>
<div class="literalblock">
<div class="content">
<pre><tt>Coming soon.</tt></pre>
</div></div>
<div class="sect3">
<h4 id="_class">13.4.1. Class</h4>
</div>
<div class="sect3">
<h4 id="_processing_decorated_annotated_member_name">13.4.2. Processing decorated (annotated) member name</h4>
</div>
<div class="sect3">
<h4 id="_attributes">13.4.3. Attributes</h4>
<div class="sect4">
<h5 id="_persistable">persistable</h5>
</div>
<div class="sect4">
<h5 id="_watchable">watchable</h5>
</div>
<div class="sect4">
<h5 id="_listen">listen</h5>
</div>
<div class="sect4">
<h5 id="_subscribe">subscribe</h5>
</div>
<div class="sect4">
<h5 id="_sequence">sequence</h5>
</div>
<div class="sect4">
<h5 id="_command">command</h5>
</div>
<div class="sect4">
<h5 id="_nmap_2">nmap</h5>
</div>
<div class="sect4">
<h5 id="_cmap">cmap</h5>
</div>
<div class="sect4">
<h5 id="_add_hook">add-hook</h5>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_process_js_plug_and_play_dynamic_module_loading">13.5. process.js / Plug-and-play dynamic module loading</h3>
<div class="literalblock">
<div class="content">
<pre><tt>Coming soon.</tt></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_event_js_event_system">13.6. event.js / Event system</h3>
<div class="paragraph"><p>Defines class EventBroker, which is able to interpret and evaluate
"Topic" and "Event Expression".</p></div>
<div class="sect3">
<h4 id="_topic_overview">13.6.1. "Topic" Overview</h4>
<div class="literalblock">
<div class="content">
<pre><tt>In this event system, registered events is concerned by "topic" that
is string variable consists of some digits and alphabets.</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>If you registered an event as follows:</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>var id = broker.subscribe(&lt;topic&gt;, &lt;handler&gt;, ....);</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>This event handler could be fired as following code:</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>broker.notify(&lt;topic&gt;);</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>The subscribe method returns an ID string.
When you want to unregister handler, use it as follows:</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>broker.unsubscribe(id);</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>NOTE that this ID is NOT corresponds to a handler, one-to-one.
The relation between Topic-ID is as same as that, because this event
system is based on the concept of multicast delegate system.</tt></pre>
</div></div>
<div class="imageblock">
<div class="content">
<img src="images/topic.png" alt="images/topic.png" />
</div>
</div>
</div>
<div class="sect3">
<h4 id="_event_expression_overview">13.6.2. "Event Expression" Overview</h4>
<div class="literalblock">
<div class="content">
<pre><tt>Event Expression indicates how the broker waits multiple events.
It was given to subscriber method, that called such as:</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>broker.subscribe(&lt;expression&gt;, ....);</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>&lt;expression&gt; consists of 1 or multiple event topics and other tokens,
that ruled by simple grammar. the detail of it is as below...</tt></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_grammer_of_event_expression">13.6.3. Grammer of Event Expression</h4>
<div class="listingblock">
<div class="content">
<pre><tt>   IdentifierCharacter := '_' | '-' | digit | alphabet

   NormalToken := IdentifierCharacter, IdentifierCharacter*

   GlobToken := '{', NormalToken, '}'
              | '{', NormalToken, '}', NormalToken
              | NormalToken, '{', NormalToken, '}'
              | NormalToken, '{', NormalToken, '}', NormalToken

   GlobToken := NormalToken | GlobToken

   PrimaryExpression := Token | '(', Expression, ')'

   UnaryOperator := '@' | '~'

   UnaryExpression := PrimaryExpression | UnaryOperator, PrimaryExpression

   BinaryOperator := 'and' | 'or' | '&amp;' | '|'

   BinaryExpression := UnaryExpression | UnaryExpression, BinaryOperator, UnaryExpression

   Expression := BinaryExpression</tt></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_event_expression_example">13.6.4. Event Expression Example</h4>
<div class="ulist"><ul>
<li>
<p>
case 1.
</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content">
<pre><tt>     "A"</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>-&gt; it triggered when the event "A" is signaled.</tt></pre>
</div></div>
<div class="ulist"><ul>
<li>
<p>
case 2.
</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content">
<pre><tt>     "A | B"</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>-&gt; wait for multiple events "A" OR "B".
   it is triggered when one of either events is signaled.</tt></pre>
</div></div>
<div class="ulist"><ul>
<li>
<p>
case 3.
</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content">
<pre><tt>     "A &amp; B"</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>-&gt; wait for both events "A" AND "B"
   it is triggered when both of these events is signaled.</tt></pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="_ttydriver_py_tty_driver">13.7. ttydriver.py / TTY Driver</h3>
<div class="sect3">
<h4 id="_module_overview">13.7.1. Module Overview</h4>
<div class="paragraph"><p>This module is assumed to be called by tanasinn&#8217;s "tty.js".
First, tanasinn opens TCP channel and listen on 2 ports, [I/O channel] and
[Control channel].
Next, tanasinn should call this script, with 2 arguments that is represent
above-mentioned 2 channel&#8217;s port numbers.
Then, A TeletypeDriver object is instantiate. it connect these channels and
establish TCP connection, and finally forks new 4 processes as follows:</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
Application Process
   This is user-specified application process, launched by command such as
   the following.
</p>
</li>
</ol></div>
<div class="listingblock">
<div class="content">
<pre><tt>      /bin/sh -c 'exec &lt;startcommand&gt;'</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>&lt;startcommand&gt; is asked for tanasinn through the &lt;Control channel&gt;.</tt></pre>
</div></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
Writing Process
   This process wait to receive data from tanasinn through &lt;I/O channel&gt;,
   which is user&#8217;s input key sequence in many cases.
   As receiving data, the Process passes it to TTY master device as it is.
</p>
</li>
<li>
<p>
Reading Process
   This process wait to receive data from TTY master device, which is output
   sequence from application program in many cases.
   As receiving data, the Process passes it to tanasinn through [I/O channel].
</p>
</li>
<li>
<p>
Controlling Process
   This process communicate with tanasinn through [Control channel] in
   simple, lightweight, 7bit ascii-based protocol.
</p>
</li>
</ol></div>
<div class="imageblock">
<div class="content">
<img src="images/topic.png" alt="images/topic.png" />
</div>
</div>
<div class="literalblock">
<div class="content">
<pre><tt>figure-1. Communication among TTY device pair, TeletypeDriver, tanasinn.</tt></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_about_control_channel_s_protocol">13.7.2. About [Control channel]'s protocol</h4>
<div class="sect4">
<h5 id="_protocol_overview">Protocol Overview</h5>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
This protocol is line-oriented. line terminator is <em>\n</em> (0x0a).
</p>
</li>
<li>
<p>
This protocol is command-based. 1 line should be interpreted as 1
       command.
       A command is composed of 1 or multiple tokens. delimiter character is
       ' ' (0x20).
</p>
</li>
<li>
<p>
First token is <strong><span class="bold">opecode</span></strong>, represent a operation.
       An <strong><span class="bold">opecode</span></strong> consists of lower-case alphabetic sets ([a-z]+).
</p>
</li>
<li>
<p>
Tokens after <strong><span class="bold">opecode</span></strong> represent arguments.
       An arguments consists of multiple printable characters, that is
       encoded in base64 Data Encoding, defined in RFC-3548.
</p>
</li>
</ol></div>
<div class="listingblock">
<div class="content">
<pre><tt>       example 1:
         xoff\n</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>Opecode of this command is "xoff". "\n" is line terminator.</tt></pre>
</div></div>
<div class="listingblock">
<div class="content">
<pre><tt>       example 2:
         resize ODA= MjQ=\n</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>In this case, [bold]*opecode* is "resize".
Arguments are "ODA=" and "MjQ=", these strings mean "80" and "24"
when decoded.</tt></pre>
</div></div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_builder_js_xul_dynamic_construction">13.8. builder.js / XUL dynamic construction</h3>
<div class="paragraph"><p>Accept UI-template object and convert it to a tree of DOM element.</p></div>
<div class="sect3">
<h4 id="_ui_template_overview">13.8.1. UI-template overview</h4>
<div class="literalblock">
<div class="content">
<pre><tt>UI-template is JSON-style object that is described as based on the
specific rule.
It is to be converted to a node set of XUL/HTML/SVG elements by
"Template Builder" object.
Dependencies between DOM fragments are automatically resolved.
You need not to take care of order for building them.</tt></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_examples">13.8.2. Examples</h4>
<div class="paragraph"><p>Example 1:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>
   <span style="color: #990000">(</span><span style="color: #FF0000">{</span>
     tagName<span style="color: #990000">:</span> <span style="color: #FF0000">"box"</span><span style="color: #990000">,</span>
     flex<span style="color: #990000">:</span> <span style="color: #993399">1</span><span style="color: #990000">,</span>
     style<span style="color: #990000">:</span> <span style="color: #FF0000">{</span>
       backgroundColor<span style="color: #990000">:</span> <span style="color: #FF0000">"red"</span>
     <span style="color: #FF0000">}</span>
   <span style="color: #FF0000">}</span><span style="color: #990000">)</span>
</tt></pre></div></div>
<div class="literalblock">
<div class="content">
<pre><tt>It will be converted to following XUL element.</tt></pre>
</div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>     <span style="font-weight: bold"><span style="color: #0000FF">&lt;box</span></span> <span style="color: #009900">flex</span><span style="color: #990000">=</span><span style="color: #FF0000">"1"</span> <span style="color: #009900">style</span><span style="color: #990000">=</span><span style="color: #FF0000">"background-color: red;"</span><span style="font-weight: bold"><span style="color: #0000FF">/&gt;</span></span></tt></pre></div></div>
<div class="literalblock">
<div class="content">
<pre><tt>Every UI-template object consists of &lt;Element node&gt; (1), and it is
typically a tree set of &lt;Element node&gt;s.
It always includes "tagName" property (2), and often includes
&lt;Style node&gt; (3).
&lt;Style node&gt; may have some CSS properties in camel-case (4).</tt></pre>
</div></div>
<div class="paragraph"><p>Example 2:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>
   <span style="color: #990000">(</span><span style="color: #FF0000">{</span>
     tagName<span style="color: #990000">:</span> <span style="color: #FF0000">"html:div"</span><span style="color: #990000">,</span>
     parentNode<span style="color: #990000">:</span> <span style="color: #FF0000">"id-of-parent"</span><span style="color: #990000">,</span>
     style<span style="color: #990000">:</span> <span style="color: #FF0000">{</span>
       textAlign<span style="color: #990000">:</span> <span style="color: #FF0000">"center"</span>
     <span style="color: #FF0000">}</span>
     childNodes<span style="color: #990000">:</span> <span style="color: #FF0000">{</span>
       tagName<span style="color: #990000">:</span> <span style="color: #FF0000">"html:div"</span><span style="color: #990000">,</span>
       style<span style="color: #990000">:</span> <span style="color: #FF0000">{</span>
         fontSize<span style="color: #990000">:</span> <span style="color: #FF0000">"1.5em"</span>
       <span style="color: #FF0000">}</span><span style="color: #990000">,</span>
       childNodes<span style="color: #990000">:</span> <span style="color: #990000">[</span>
         <span style="color: #FF0000">{</span>
           tagName<span style="color: #990000">:</span> <span style="color: #FF0000">"html:span"</span><span style="color: #990000">,</span>
           innerText<span style="color: #990000">:</span> <span style="color: #FF0000">"abcde"</span>
         <span style="color: #FF0000">}</span><span style="color: #990000">,</span>
         <span style="color: #FF0000">{</span>
           tagName<span style="color: #990000">:</span> <span style="color: #FF0000">"html:div"</span><span style="color: #990000">,</span>
         <span style="color: #FF0000">}</span>
       <span style="color: #990000">]</span>
     <span style="color: #FF0000">}</span>
   <span style="color: #FF0000">}</span><span style="color: #990000">)</span>
</tt></pre></div></div>
<div class="literalblock">
<div class="content">
<pre><tt>It will be converted as below.</tt></pre>
</div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>
   <span style="font-weight: bold"><span style="color: #0000FF">&lt;html:div</span></span> <span style="color: #009900">style</span><span style="color: #990000">=</span><span style="color: #FF0000">"text-align: center;"</span><span style="font-weight: bold"><span style="color: #0000FF">&gt;</span></span>
     <span style="font-weight: bold"><span style="color: #0000FF">&lt;html:div</span></span> <span style="color: #009900">style</span><span style="color: #990000">=</span><span style="color: #FF0000">"font-size: 1.5em;"</span><span style="font-weight: bold"><span style="color: #0000FF">&gt;</span></span>
       <span style="font-weight: bold"><span style="color: #0000FF">&lt;html:span&gt;</span></span>abcde<span style="font-weight: bold"><span style="color: #0000FF">&lt;/html:span&gt;</span></span>
       <span style="font-weight: bold"><span style="color: #0000FF">&lt;html:div/&gt;</span></span>
     <span style="font-weight: bold"><span style="color: #0000FF">&lt;/html:span&gt;</span></span>
   <span style="font-weight: bold"><span style="color: #0000FF">&lt;/html:div&gt;</span></span>
</tt></pre></div></div>
<div class="literalblock">
<div class="content">
<pre><tt>The "parentNode" property (5) indicates at which the current node is to
be set. if the type of property value was "string", it regards as node
ID of the parent node. or if its type is "object", especially
HTMLElement, it regards as the parent node object itself.
The "childNodes" property has an effect which cascades down
following &lt;Element node&gt; (6). If you wanted to create two or more
child nodes under the same node, you should substitute an Array of
&lt;Element node&gt;s (7) in "childNodes" property.
The "innerText" property (8) creates a text node under current
&lt;Element node&gt;.</tt></pre>
</div></div>
<div class="paragraph"><p>Example 2:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>
   <span style="color: #990000">(</span><span style="color: #FF0000">{</span>
     tagName<span style="color: #990000">:</span> <span style="color: #FF0000">"hbox"</span><span style="color: #990000">,</span>
     id<span style="color: #990000">:</span> <span style="color: #FF0000">"parent"</span><span style="color: #990000">,</span>
     flex<span style="color: #990000">:</span> <span style="color: #993399">1</span><span style="color: #990000">,</span>
     onconstruct<span style="color: #990000">:</span> <span style="color: #FF0000">{</span>
       handler<span style="color: #990000">:</span> <span style="font-weight: bold"><span style="color: #0000FF">function</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> window<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">alert</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>id<span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
     <span style="color: #FF0000">}</span><span style="color: #990000">,</span>
     childNodes<span style="color: #990000">:</span> <span style="color: #990000">[</span>
       <span style="color: #FF0000">{</span>
         tagName<span style="color: #990000">:</span> <span style="color: #FF0000">"vbox"</span><span style="color: #990000">,</span>
         id<span style="color: #990000">:</span> <span style="color: #FF0000">"left"</span><span style="color: #990000">,</span>
         flex<span style="color: #990000">:</span> <span style="color: #993399">1</span><span style="color: #990000">,</span>
         listener<span style="color: #990000">:</span> <span style="color: #FF0000">{</span>
           type<span style="color: #990000">:</span> <span style="color: #FF0000">"mouseover"</span><span style="color: #990000">,</span>
           context<span style="color: #990000">:</span> window<span style="color: #990000">,</span>
           handler<span style="color: #990000">:</span> onMouseOver
         <span style="color: #FF0000">}</span>
       <span style="color: #FF0000">}</span><span style="color: #990000">,</span>
       <span style="color: #FF0000">{</span>
         tagName<span style="color: #990000">:</span> <span style="color: #FF0000">"vbox"</span><span style="color: #990000">,</span>
         id<span style="color: #990000">:</span> <span style="color: #FF0000">"right"</span><span style="color: #990000">,</span>
         flex<span style="color: #990000">:</span> <span style="color: #993399">1</span><span style="color: #990000">,</span>
         listener<span style="color: #990000">:</span> <span style="color: #990000">[</span>
           <span style="color: #FF0000">{</span>
             type<span style="color: #990000">:</span> <span style="color: #FF0000">"mouseup"</span><span style="color: #990000">,</span>
             handler<span style="color: #990000">:</span> onMouseUp
           <span style="color: #FF0000">}</span><span style="color: #990000">,</span>
           <span style="color: #FF0000">{</span>
             type<span style="color: #990000">:</span> <span style="color: #FF0000">"mousedown"</span><span style="color: #990000">,</span>
             handler<span style="color: #990000">:</span> onMouseDown
           <span style="color: #FF0000">}</span>
         <span style="color: #990000">]</span>
       <span style="color: #FF0000">}</span>
     <span style="color: #990000">]</span>
   <span style="color: #FF0000">}</span><span style="color: #990000">)</span>
</tt></pre></div></div>
<div class="literalblock">
<div class="content">
<pre><tt>It almost corresponds to following XUL code.</tt></pre>
</div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>
   <span style="font-weight: bold"><span style="color: #0000FF">&lt;hbox</span></span> <span style="color: #009900">id</span><span style="color: #990000">=</span><span style="color: #FF0000">"parent"</span> <span style="color: #009900">flex</span><span style="color: #990000">=</span><span style="color: #FF0000">"1"</span><span style="font-weight: bold"><span style="color: #0000FF">&gt;</span></span>
     <span style="font-weight: bold"><span style="color: #0000FF">&lt;vbox</span></span> <span style="color: #009900">id</span><span style="color: #990000">=</span><span style="color: #FF0000">"left"</span> <span style="color: #009900">flex</span><span style="color: #990000">=</span><span style="color: #FF0000">"1"</span> <span style="color: #009900">onmouseover</span><span style="color: #990000">=</span><span style="color: #FF0000">""</span><span style="font-weight: bold"><span style="color: #0000FF">/&gt;</span></span>
     <span style="font-weight: bold"><span style="color: #0000FF">&lt;vbox</span></span> <span style="color: #009900">id</span><span style="color: #990000">=</span><span style="color: #FF0000">"right"</span> <span style="color: #009900">flex</span><span style="color: #990000">=</span><span style="color: #FF0000">"1"</span><span style="font-weight: bold"><span style="color: #0000FF">/&gt;</span></span>
   <span style="font-weight: bold"><span style="color: #0000FF">&lt;/hbox&gt;</span></span>
   <span style="font-weight: bold"><span style="color: #0000FF">&lt;script</span></span> <span style="color: #009900">type</span><span style="color: #990000">=</span><span style="color: #FF0000">"application/x-javascript"</span>/<span style="font-weight: bold"><span style="color: #0000FF">&gt;</span></span>
     <span style="color: #990000">&lt;![</span>CDATA<span style="color: #990000">[</span>
       <span style="font-weight: bold"><span style="color: #0000FF">var</span></span> parent <span style="color: #990000">=</span> document<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getElementById</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"parent"</span><span style="color: #990000">);</span>
       <span style="font-weight: bold"><span style="color: #0000FF">var</span></span> left <span style="color: #990000">=</span> document<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getElementById</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"left"</span><span style="color: #990000">);</span>
       <span style="font-weight: bold"><span style="color: #0000FF">var</span></span> right <span style="color: #990000">=</span> document<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getElementById</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"right"</span><span style="color: #990000">);</span>
       <span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">function</span></span><span style="color: #990000">()</span> window<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">alert</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>id<span style="color: #990000">)).</span><span style="font-weight: bold"><span style="color: #000000">apply</span></span><span style="color: #990000">(</span>parent<span style="color: #990000">);</span>
       left<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">addEventListener</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"mouseover"</span><span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #0000FF">function</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
         onMouseOver<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">apply</span></span><span style="color: #990000">(</span>window<span style="color: #990000">,</span> arguments<span style="color: #990000">);</span>
       <span style="color: #FF0000">}</span><span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #0000FF">false</span></span><span style="color: #990000">);</span>
       right<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">addEventListener</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"mouseup"</span><span style="color: #990000">,</span> onMouseUp<span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #0000FF">false</span></span><span style="color: #990000">);</span>
       right<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">addEventListener</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"mousedown"</span><span style="color: #990000">,</span> onMouseOver<span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #0000FF">false</span></span><span style="color: #990000">);</span>
     <span style="color: #990000">]]&gt;</span>
   <span style="font-weight: bold"><span style="color: #0000FF">&lt;/script&gt;</span></span>
</tt></pre></div></div>
<div class="literalblock">
<div class="content">
<pre><tt>The "onconstruct" property (9) defines a event function which fired
when the property itself is parsed.
The "listener" property (10) attaches a event handler at the current
&lt;Element node&gt;.</tt></pre>
</div></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_バグレポート">14. バグレポート</h2>
<div class="sectionbody">
<div class="paragraph"><p>バグレポートを歓迎します。
saitoha &lt;<a href="mailto:user@zuse.jp">user@zuse.jp</a>&gt;
twitter: <a href="http://twitter.com/kefir_">http://twitter.com/kefir_</a></p></div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated 2012-05-31 22:29:48 JST
</div>
</div>
</body>
</html>
